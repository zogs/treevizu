/*! For license information please see index.js.LICENSE.txt */
!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,s){"use strict";s.r(e);var n={};s.r(n),s.d(n,"linear",(function(){return z})),s.d(n,"get",(function(){return q})),s.d(n,"getPowIn",(function(){return V})),s.d(n,"getPowOut",(function(){return J})),s.d(n,"getPowInOut",(function(){return Q})),s.d(n,"sineIn",(function(){return K})),s.d(n,"sineOut",(function(){return Z})),s.d(n,"sineInOut",(function(){return tt})),s.d(n,"getBackIn",(function(){return et})),s.d(n,"getBackOut",(function(){return it})),s.d(n,"getBackInOut",(function(){return st})),s.d(n,"circIn",(function(){return nt})),s.d(n,"circOut",(function(){return rt})),s.d(n,"circInOut",(function(){return ht})),s.d(n,"bounceIn",(function(){return at})),s.d(n,"bounceOut",(function(){return ot})),s.d(n,"bounceInOut",(function(){return lt})),s.d(n,"getElasticIn",(function(){return dt})),s.d(n,"getElasticOut",(function(){return ut})),s.d(n,"getElasticInOut",(function(){return ct})),s.d(n,"none",(function(){return pt})),s.d(n,"quadIn",(function(){return _t})),s.d(n,"quadOut",(function(){return gt})),s.d(n,"quadInOut",(function(){return mt})),s.d(n,"cubicIn",(function(){return ft})),s.d(n,"cubicOut",(function(){return wt})),s.d(n,"cubicInOut",(function(){return vt})),s.d(n,"quartIn",(function(){return xt})),s.d(n,"quartOut",(function(){return bt})),s.d(n,"quartInOut",(function(){return yt})),s.d(n,"quintIn",(function(){return Tt})),s.d(n,"quintOut",(function(){return Et})),s.d(n,"quintInOut",(function(){return St})),s.d(n,"backIn",(function(){return Ct})),s.d(n,"backOut",(function(){return Mt})),s.d(n,"backInOut",(function(){return Pt})),s.d(n,"elasticIn",(function(){return It})),s.d(n,"elasticOut",(function(){return kt})),s.d(n,"elasticInOut",(function(){return Lt}));class r{constructor(t,e=!1,i=!1){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=e,this.cancelable=i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}preventDefault(){return this.defaultPrevented=this.cancelable,this}stopPropagation(){return this.propagationStopped=!0,this}stopImmediatePropagation(){return this.immediatePropagationStopped=this.propagationStopped=!0,this}remove(){return this.removed=!0,this}clone(){const t=new r(this.type,this.bubbles,this.cancelable);for(let e in this)this.hasOwnProperty(e)&&(t[e]=this[e]);return t}set(t){for(let e in t)this[e]=t[e];return this}toString(){return`[${this.constructor.name} (type=${this.type})]`}}var h=r;class a{static initialize(t){const e=a.prototype;t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger}constructor(){this._listeners=null,this._captureListeners=null}addEventListener(t,e,i=!1){let s;s=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};let n=s[t];return n&&(this.removeEventListener(t,e,i),n=s[t]),n?n.push(e):s[t]=[e],e}on(t,e,i=null,s=!1,n={},r=!1){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,(t=>{e.call(i,t,n),s&&t.remove()}),r)}removeEventListener(t,e,i=!1){const s=i?this._captureListeners:this._listeners;if(!s)return;const n=s[t];if(!n)return;const r=n.length;for(let i=0;i<r;i++)if(n[i]===e){1===r?delete s[t]:n.splice(i,1);break}}off(t,e,i=!1){this.removeEventListener(t,e,i)}removeAllEventListeners(t=null){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null}dispatchEvent(t,e=!1,i=!1){if("string"==typeof t){const s=this._listeners;if(!(e||s&&s[t]))return!0;t=new h(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){let e=this;const i=[e];for(;e.parent;)i.push(e=e.parent);const s=i.length;let n;for(n=s-1;n>=0&&!t.propagationStopped;n--)i[n]._dispatchEvent(t,1+(0==n));for(n=1;n<s&&!t.propagationStopped;n++)i[n]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented}hasEventListener(t){const e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])}willTrigger(t){let e=this;for(;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1}toString(){return`[${this.constructor.name+this.name?" "+this.name:""}]`}_dispatchEvent(t,e){const i=1===e?this._captureListeners:this._listeners;if(t&&i){let s,n=i[t.type];if(!n||0===(s=n.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,n=n.slice();for(let i=0;i<s&&!t.immediatePropagationStopped;i++){let s=n[i];s.handleEvent?s.handleEvent(t):s(t),t.removed&&(this.off(t.type,s,1===e),t.removed=!1)}}}}var o=a;class l extends o{static get RAF_SYNCHED(){return"synched"}static get RAF(){return"raf"}static get TIMEOUT(){return"timeout"}constructor(t){super(),this.name=t,this.timingMode=l.TIMEOUT,this.maxDelta=0,this.paused=!1,this._inited=!1,this._startTime=0,this._pausedTime=0,this._ticks=0,this._pausedTicks=0,this._interval=50,this._lastTime=0,this._times=null,this._tickTimes=null,this._timerId=null,this._raf=!0}get interval(){return this._interval}set interval(t){this._interval=t,this._inited&&this._setupTick()}get framerate(){return 1e3/this._interval}set framerate(t){this.interval=1e3/t}init(){this._inited||(this._inited=!0,this._times=[],this._tickTimes=[],this._startTime=this._getTime(),this._times.push(this._lastTime=0),this._setupTick())}reset(){if(this._raf){let t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;t&&t(this._timerId)}else clearTimeout(this._timerId);this.removeAllEventListeners("tick"),this._timerId=this._times=this._tickTimes=null,this._startTime=this._lastTime=this._ticks=0,this._inited=!1}addEventListener(t,e,i){return!this._inited&&this.init(),super.addEventListener(t,e,i)}getMeasuredTickTime(t=null){const e=this._tickTimes;return!e||e.length<1?-1:(t=Math.min(e.length,t||0|this.framerate),e.reduce(((t,e)=>t+e),0)/t)}getMeasuredFPS(t=null){const e=this._times;return!e||e.length<2?-1:(t=Math.min(e.length-1,t||0|this.framerate),1e3/((e[0]-e[t])/t))}getTime(t=!1){return this._startTime?this._getTime()-(t?this._pausedTime:0):-1}getEventTime(t=!1){return this._startTime?(this._lastTime||this._startTime)-(t?this._pausedTime:0):-1}getTicks(t=!1){return this._ticks-(t?this._pausedTicks:0)}_handleSynch(){this._timerId=null,this._setupTick(),this._getTime()-this._lastTime>=.97*(this._interval-1)&&this._tick()}_handleRAF(){this._timerId=null,this._setupTick(),this._tick()}_handleTimeout(){this._timerId=null,this._setupTick(),this._tick()}_setupTick(){if(null!=this._timerId)return;const t=this.timingMode||this._raf&&l.RAF;if(t===l.RAF_SYNCHED||t===l.RAF){const e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(e)return this._timerId=e(t===l.RAF?this._handleRAF.bind(this):this._handleSynch.bind(this)),void(this._raf=!0)}this._raf=!1,this._timerId=setTimeout(this._handleTimeout.bind(this),this._interval)}_tick(){const t=this.paused,e=this._getTime(),i=e-this._lastTime;if(this._lastTime=e,this._ticks++,t&&(this._pausedTicks++,this._pausedTime+=i),this.hasEventListener("tick")){const s=new h("tick"),n=this.maxDelta;s.delta=n&&i>n?n:i,s.paused=t,s.time=e,s.runTime=e-this._pausedTime,this.dispatchEvent(s)}for(this._tickTimes.unshift(this._getTime()-e);this._tickTimes.length>100;)this._tickTimes.pop();for(this._times.unshift(e);this._times.length>100;)this._times.pop()}_getTime(){const t=window.performance&&window.performance.now;return(t&&t.call(performance)||(new Date).getTime())-this._startTime}static on(t,e,i,s,n,r){return u.on(t,e,i,s,n,r)}static removeEventListener(t,e,i){u.removeEventListener(t,e,i)}static off(t,e,i){u.off(t,e,i)}static removeAllEventListeners(t){u.removeAllEventListeners(t)}static dispatchEvent(t,e,i){return u.dispatchEvent(t,e,i)}static hasEventListener(t){return u.hasEventListener(t)}static willTrigger(t){return u.willTrigger(t)}static toString(){return u.toString()}static init(){u.init()}static reset(){u.reset()}static addEventListener(t,e,i){u.addEventListener(t,e,i)}static getMeasuredTickTime(t){return u.getMeasuredTickTime(t)}static getMeasuredFPS(t){return u.getMeasuredFPS(t)}static getTime(t){return u.getTime(t)}static getEventTime(t){return u.getEventTime(t)}static getTicks(t){return u.getTicks(t)}static get interval(){return u.interval}static set interval(t){u.interval=t}static get framerate(){return u.framerate}static set framerate(t){u.framerate=t}static get name(){return u.name}static set name(t){u.name=t}static get timingMode(){return u.timingMode}static set timingMode(t){u.timingMode=t}static get maxDelta(){return u.maxDelta}static set maxDelta(t){u.maxDelta=t}static get paused(){return u.paused}static set paused(t){u.paused=t}}var d=l;const u=new l("createjs.global");var c=class{constructor(){throw new Error("\n\t\t\tStageGL is not currently supported on the EaselJS 2.0 branch.\n\t\t\tEnd of Q1 2018 is targetted for StageGL support.\n\t\t\tFollow @CreateJS on Twitter for updates.\n\t\t")}};class p{constructor(t="black",e=0,i=0,s=0){this.color=t,this.offsetX=e,this.offsetY=i,this.blur=s}toString(){return`[${this.constructor.name}]`}clone(){return new p(this.color,this.offsetX,this.offsetY,this.blur)}}p.identity=new p("transparent");let _=0;class g{constructor(t,e){this.setValues(t,e)}setValues(t=0,e=0){return this.x=t,this.y=e,this}copy(t){return this.x=t.x,this.y=t.y,this}clone(){return new g(this.x,this.y)}toString(){return`[${this.constructor.name} (x=${this.x} y=${this.y})]`}}class m{constructor(t,e,i,s,n,r){this.setValues(t,e,i,s,n,r)}setValues(t=1,e=0,i=0,s=1,n=0,r=0){return this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=r,this}append(t,e,i,s,n,r){let h=this.a,a=this.b,o=this.c,l=this.d;return 1==t&&0==e&&0==i&&1==s||(this.a=h*t+o*e,this.b=a*t+l*e,this.c=h*i+o*s,this.d=a*i+l*s),this.tx=h*n+o*r+this.tx,this.ty=a*n+l*r+this.ty,this}prepend(t,e,i,s,n,r){let h=this.a,a=this.c,o=this.tx;return this.a=t*h+i*this.b,this.b=e*h+s*this.b,this.c=t*a+i*this.d,this.d=e*a+s*this.d,this.tx=t*o+i*this.ty+n,this.ty=e*o+s*this.ty+r,this}appendMatrix(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)}prependMatrix(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)}appendTransform(t,e,i,s,n,r,h,a,o){let l,d,u;return n%360?(l=n*m.DEG_TO_RAD,d=Math.cos(l),u=Math.sin(l)):(d=1,u=0),r||h?(r*=m.DEG_TO_RAD,h*=m.DEG_TO_RAD,this.append(Math.cos(h),Math.sin(h),-Math.sin(r),Math.cos(r),t,e),this.append(d*i,u*i,-u*s,d*s,0,0)):this.append(d*i,u*i,-u*s,d*s,t,e),(a||o)&&(this.tx-=a*this.a+o*this.c,this.ty-=a*this.b+o*this.d),this}prependTransform(t,e,i,s,n,r,h,a,o){let l,d,u;return n%360?(l=n*m.DEG_TO_RAD,d=Math.cos(l),u=Math.sin(l)):(d=1,u=0),(a||o)&&(this.tx-=a,this.ty-=o),r||h?(r*=m.DEG_TO_RAD,h*=m.DEG_TO_RAD,this.prepend(d*i,u*i,-u*s,d*s,0,0),this.prepend(Math.cos(h),Math.sin(h),-Math.sin(r),Math.cos(r),t,e)):this.prepend(d*i,u*i,-u*s,d*s,t,e),this}rotate(t){t*=m.DEG_TO_RAD;let e=Math.cos(t),i=Math.sin(t),s=this.a,n=this.b;return this.a=s*e+this.c*i,this.b=n*e+this.d*i,this.c=-s*i+this.c*e,this.d=-n*i+this.d*e,this}skew(t,e){return t*=m.DEG_TO_RAD,e*=m.DEG_TO_RAD,this.append(Math.cos(e),Math.sin(e),-Math.sin(t),Math.cos(t),0,0),this}scale(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this}translate(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this}identity(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this}invert(){let t=this.a,e=this.b,i=this.c,s=this.d,n=this.tx,r=t*s-e*i;return this.a=s/r,this.b=-e/r,this.c=-i/r,this.d=t/r,this.tx=(i*this.ty-s*n)/r,this.ty=-(t*this.ty-e*n)/r,this}isIdentity(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d}equals(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d}transformPoint(t,e,i=new g){return i.x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i}decompose(t={}){t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);let e=Math.atan2(-this.c,this.d),i=Math.atan2(this.b,this.a);return Math.abs(1-e/i)<1e-5?(t.rotation=i/m.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=e/m.DEG_TO_RAD,t.skewY=i/m.DEG_TO_RAD),t}copy(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)}clone(){return new m(this.a,this.b,this.c,this.d,this.tx,this.ty)}toString(){return`[${this.constructor.name} (a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty})]`}}m.DEG_TO_RAD=Math.PI/180,m.identity=new m;class f{constructor(t,e,i,s,n){this.setValues(t,e,i,s,n)}setValues(t=!0,e=1,i,s,n){return this.visible=t,this.alpha=e,this.shadow=i,this.compositeOperation=s,this.matrix=n||this.matrix&&this.matrix.identity()||new m,this}append(t,e,i,s,n){return this.alpha*=e,this.shadow=i||this.shadow,this.compositeOperation=s||this.compositeOperation,this.visible=this.visible&&t,n&&this.matrix.appendMatrix(n),this}prepend(t,e,i,s,n){return this.alpha*=e,this.shadow=this.shadow||i,this.compositeOperation=this.compositeOperation||s,this.visible=this.visible&&t,n&&this.matrix.prependMatrix(n),this}identity(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this}clone(){return new f(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())}}class w{constructor(t,e,i,s){this.setValues(t,e,i,s)}setValues(t=0,e=0,i=0,s=0){return this.x=t,this.y=e,this.width=i,this.height=s,this}extend(t,e,i=0,s=0){return t+i>this.x+this.width&&(this.width=t+i-this.x),e+s>this.y+this.height&&(this.height=e+s-this.y),t<this.x&&(this.width+=this.x-t,this.x=t),e<this.y&&(this.height+=this.y-e,this.y=e),this}pad(t,e,i,s){return this.x-=e,this.y-=t,this.width+=e+s,this.height+=t+i,this}copy(t){return this.setValues(t.x,t.y,t.width,t.height)}contains(t,e,i=0,s=0){return t>=this.x&&t+i<=this.x+this.width&&e>=this.y&&e+s<=this.y+this.height}union(t){return this.clone().extend(t.x,t.y,t.width,t.height)}intersection(t){let e=t.x,i=t.y,s=e+t.width,n=i+t.height;return this.x>e&&(e=this.x),this.y>i&&(i=this.y),this.x+this.width<s&&(s=this.x+this.width),this.y+this.height<n&&(n=this.y+this.height),s<=e||n<=i?null:new w(e,i,s-e,n-i)}intersects(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height}isEmpty(){return this.width<=0||this.height<=0}clone(){return new w(this.x,this.y,this.width,this.height)}toString(){return`[${this.constructor.name} (x=${this.x} y=${this.y} width=${this.width} height=${this.height})]`}}class v{constructor(){this.usesContext=!1,this._multiPass=null,this.VTX_SHADER_BODY=null,this.FRAG_SHADER_BODY=null}getBounds(t){}shaderParamSetup(t,e,i){}applyFilter(t,e,i,s,n,r,h,a){r=r||t,null==h&&(h=e),null==a&&(a=i);try{let o=t.getImageData(e,i,s,n);if(this._applyFilter(o))return r.putImageData(o,h,a),!0}catch(t){}return!1}toString(){return`[${this.constructor.name}]`}clone(){return new v}_applyFilter(t){}}class x extends v{constructor(){super(),this.width=void 0,this.height=void 0,this.x=void 0,this.y=void 0,this.scale=1,this.offX=0,this.offY=0,this.cacheID=0,this._filterOffX=0,this._filterOffY=0,this._cacheDataURLID=0,this._cacheDataURL=null,this._drawWidth=0,this._drawHeight=0,this._boundRect=new w}static getFilterBounds(t,e=new w){let i=t.filters,s=i&&i.length;if(!!s<=0)return e;for(let t=0;t<s;t++){let s=i[t];if(!s||!s.getBounds)continue;let n=s.getBounds();n&&(0==t?e.setValues(n.x,n.y,n.width,n.height):e.extend(n.x,n.y,n.width,n.height))}return e}define(t,e=0,i=0,s=1,n=1,r=1,h){if(!t)throw"No symbol to cache";this._options=h,this._useWebGL=void 0!==h,this.target=t,this.width=s>=1?s:1,this.height=n>=1?n:1,this.x=e,this.y=i,this.scale=r,this.update()}update(t){if(!this.target)throw"define() must be called before update()";let e=x.getFilterBounds(this.target),i=this.target.cacheCanvas;this._drawWidth=Math.ceil(this.width*this.scale)+e.width,this._drawHeight=Math.ceil(this.height*this.scale)+e.height,i&&this._drawWidth==i.width&&this._drawHeight==i.height||this._updateSurface(),this._filterOffX=e.x,this._filterOffY=e.y,this.offX=this.x*this.scale+this._filterOffX,this.offY=this.y*this.scale+this._filterOffY,this._drawToCache(t),this.cacheID=this.cacheID?this.cacheID+1:1}release(){let t=this.target.stage;this._useWebGL&&this._webGLCache?(this._webGLCache.isCacheControlled||(this.__lastRT&&(this.__lastRT=void 0),this.__rtA&&this._webGLCache._killTextureObject(this.__rtA),this.__rtB&&this._webGLCache._killTextureObject(this.__rtB),this.target&&this.target.cacheCanvas&&this._webGLCache._killTextureObject(this.target.cacheCanvas)),this._webGLCache=!1):t instanceof c&&t.releaseTexture(this.target.cacheCanvas),this.target=this.target.cacheCanvas=null,this.cacheID=this._cacheDataURLID=this._cacheDataURL=void 0,this.width=this.height=this.x=this.y=this.offX=this.offY=0,this.scale=1}getCacheDataURL(){let t=this.target&&this.target.cacheCanvas;return t?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURLID=this.cacheID,this._cacheDataURL=t.toDataURL?t.toDataURL():null),this._cacheDataURL):null}draw(t){return!!this.target&&(t.drawImage(this.target.cacheCanvas,this.x+this._filterOffX/this.scale,this.y+this._filterOffY/this.scale,this._drawWidth/this.scale,this._drawHeight/this.scale),!0)}getBounds(){const t=this.scale;return this._boundRect.setValue(this._filterOffX/t,this._filterOffY/t,this.width/t,this.height/t)}_updateSurface(){let t;if(!this._useWebGL)return t=this.target.cacheCanvas,t||(t=this.target.cacheCanvas=window.createjs&&createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),t.width=this._drawWidth,void(t.height=this._drawHeight);if(!this._webGLCache)if("stage"===this._options.useGL){if(null==this.target.stage||!this.target.stage.isWebGL)throw"Cannot use 'stage' for cache because the object's parent stage is "+(null!=this.target.stage?"non WebGL.":"not set, please addChild to the correct stage.");this.target.cacheCanvas=!0,this._webGLCache=this.target.stage}else{if("new"!==this._options.useGL)throw"Invalid option provided to useGL, expected ['stage', 'new', StageGL, undefined], got "+this._options.useGL;this.target.cacheCanvas=document.createElement("canvas"),this._webGLCache=new c(this.target.cacheCanvas,{antialias:!0,transparent:!0,autoPurge:-1}),this._webGLCache.isCacheControlled=!0}let e=this._webGLCache;t=this.target.cacheCanvas,e.isCacheControlled&&(t.width=this._drawWidth,t.height=this._drawHeight,e.updateViewport(this._drawWidth,this._drawHeight)),this.target.filters?(e.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight),e.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)):e.isCacheControlled||e.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)}_drawToCache(t){let e=this.target,i=e.cacheCanvas,s=this._webGLCache;if(!this._useWebGL||!s){let s=i.getContext("2d");return t||s.clearRect(0,0,this._drawWidth+1,this._drawHeight+1),s.save(),s.globalCompositeOperation=t,s.setTransform(this.scale,0,0,this.scale,-this._filterOffX,-this._filterOffY),s.translate(-this.x,-this.y),e.draw(s,!0),s.restore(),e.filters&&e.filters.length&&this._applyFilters(e),void(i._invalid=!0)}this._webGLCache.cacheDraw(e,e.filters,this),i=this.target.cacheCanvas,i.width=this._drawWidth,i.height=this._drawHeight,i._invalid=!0}_applyFilters(){let t=this.target.cacheCanvas,e=this.target.filters,i=this._drawWidth,s=this._drawHeight,n=t.getContext("2d").getImageData(0,0,i,s),r=e.length;for(let t=0;t<r;t++)e[t]._applyFilter(n);t.getContext("2d").putImageData(n,0,0)}}class b extends o{constructor(){super(),this.alpha=1,this.cacheCanvas=null,this.bitmapCache=null,this.id=_++,this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._props=new f,this._rectangle=new w,this._bounds=null,this._webGLRenderStyle=b._StageGL_NONE}get stage(){let t=this;for(;t.parent;)t=t.parent;return/^\[Stage(GL)?(\s\(name=\w+\))?\]$/.test(t.toString())?t:null}set scale(t){this.scaleX=this.scaleY=t}get scale(){return this.scaleX}isVisible(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)}draw(t,e=!1){return this.drawCache(t,e)}drawCache(t,e=!1){let i=this.bitmapCache;return!(!i||e)&&i.draw(t)}updateContext(t){let e=this,i=e.mask,s=e._props.matrix;i&&i.graphics&&!i.graphics.isEmpty()&&(i.getMatrix(s),t.transform(s.a,s.b,s.c,s.d,s.tx,s.ty),i.graphics.drawAsPath(t),t.clip(),s.invert(),t.transform(s.a,s.b,s.c,s.d,s.tx,s.ty)),this.getMatrix(s);let n=s.tx,r=s.ty;b._snapToPixelEnabled&&e.snapToPixel&&(n=n+(n<0?-.5:.5)|0,r=r+(r<0?-.5:.5)|0),t.transform(s.a,s.b,s.c,s.d,n,r),t.globalAlpha*=e.alpha,e.compositeOperation&&(t.globalCompositeOperation=e.compositeOperation),e.shadow&&this._applyShadow(t,e.shadow)}cache(t,e,i,s,n=1,r){this.bitmapCache||(this.bitmapCache=new x),this.bitmapCache.define(this,t,e,i,s,n,r)}updateCache(t){if(!this.bitmapCache)throw"No cache found. cache() must be called before updateCache()";this.bitmapCache.update(t)}uncache(){this.bitmapCache&&(this.bitmapCache.release(),this.bitmapCache=void 0)}getCacheDataURL(){return this.bitmapCache?this.bitmapCache.getDataURL():null}localToGlobal(t,e,i=new g){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(t,e,i)}globalToLocal(t,e,i=new g){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(t,e,i)}localToLocal(t,e,i,s){return s=this.localToGlobal(t,e,s),i.globalToLocal(s.x,s.y,s)}setTransform(t=0,e=0,i=1,s=1,n=0,r=0,h=0,a=0,o=0){return this.x=t,this.y=e,this.scaleX=i,this.scaleY=s,this.rotation=n,this.skewX=r,this.skewY=h,this.regX=a,this.regY=o,this}getMatrix(t){let e=this,i=t&&t.identity()||new m;return e.transformMatrix?i.copy(e.transformMatrix):i.appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY)}getConcatenatedMatrix(t){let e=this,i=this.getMatrix(t);for(;e=e.parent;)i.prependMatrix(e.getMatrix(e._props.matrix));return i}getConcatenatedDisplayProps(t){t=t?t.identity():new f;let e=this,i=e.getMatrix(t.matrix);do{t.prepend(e.visible,e.alpha,e.shadow,e.compositeOperation),e!=this&&i.prependMatrix(e.getMatrix(e._props.matrix))}while(e=e.parent);return t}hitTest(t,e){let i=b._hitTestContext;i.setTransform(1,0,0,1,-t,-e),this.draw(i);let s=this._testHit(i);return i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,2,2),s}set(t){for(let e in t)this[e]=t[e];return this}getBounds(){if(this._bounds)return this._rectangle.copy(this._bounds);let t=this.cacheCanvas;if(t){let e=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,t.width/e,t.height/e)}return null}getTransformedBounds(){return this._getBounds()}setBounds(t,e,i,s){null==t&&(this._bounds=null),this._bounds=(this._bounds||new w).setValues(t,e,i,s)}clone(){return this._cloneProps(new b)}toString(){return`[${this.constructor.name}${this.name?` (name=${this.name})`:""}]`}_cloneProps(t){return t.alpha=this.alpha,t.mouseEnabled=this.mouseEnabled,t.tickEnabled=this.tickEnabled,t.name=this.name,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.shadow=this.shadow,t.skewX=this.skewX,t.skewY=this.skewY,t.visible=this.visible,t.x=this.x,t.y=this.y,t.compositeOperation=this.compositeOperation,t.snapToPixel=this.snapToPixel,t.filters=null==this.filters?null:this.filters.slice(0),t.mask=this.mask,t.hitArea=this.hitArea,t.cursor=this.cursor,t._bounds=this._bounds,t}_applyShadow(t,e=p.identity){e=e,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY,t.shadowBlur=e.blur}_tick(t){let e=this._listeners;e&&e.tick&&(t.target=null,t.propagationStopped=t.immediatePropagationStopped=!1,this.dispatchEvent(t))}_testHit(t){try{return t.getImageData(0,0,1,1).data[3]>1}catch(t){if(!b.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.";return!1}}_getBounds(t,e){return this._transformBounds(this.getBounds(),t,e)}_transformBounds(t,e,i){if(!t)return t;let{x:s,y:n,width:r,height:h}=t,a=this._props.matrix;a=i?a.identity():this.getMatrix(a),(s||n)&&a.appendTransform(0,0,1,1,0,0,0,-s,-n),e&&a.prependMatrix(e);let o=r*a.a,l=r*a.b,d=h*a.c,u=h*a.d,c=a.tx,p=a.ty,_=c,g=c,m=p,f=p;return(s=o+c)<_?_=s:s>g&&(g=s),(s=o+d+c)<_?_=s:s>g&&(g=s),(s=d+c)<_?_=s:s>g&&(g=s),(n=l+p)<m?m=n:n>f&&(f=n),(n=l+u+p)<m?m=n:n>f&&(f=n),(n=u+p)<m?m=n:n>f&&(f=n),t.setValues(_,m,g-_,f-m)}_hasMouseEventListener(){let t=b._MOUSE_EVENTS;for(let e=0,i=t.length;e<i;e++)if(this.hasEventListener(t[e]))return!0;return!!this.cursor}}{let t=window.createjs&&createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");t.getContext&&(b._hitTestCanvas=t,b._hitTestContext=t.getContext("2d"),t.width=t.height=1)}b._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],b.suppressCrossDomainErrors=!1,b.snapToPixelEnabled=!1,b._StageGL_NONE=0,b._StageGL_SPRITE=1,b._StageGL_BITMAP=2;class y extends b{constructor(){super(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}get numChildren(){return this.children.length}isVisible(){let t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)}draw(t,e=!1){if(super.draw(t,e))return!0;let i=this.children.slice();for(let e=0,s=i.length;e<s;e++){let s=i[e];s.isVisible()&&(t.save(),s.updateContext(t),s.draw(t),t.restore())}return!0}addChild(...t){const e=t.length;if(0===e)return null;let i=t[0];if(e>1){for(let s=0;s<e;s++)i=this.addChild(t[s]);return i}let s=i.parent,n=s===this;return s&&s._removeChildAt(s.children.indexOf(i),n),i.parent=this,this.children.push(i),n||i.dispatchEvent("added"),i}addChildAt(...t){const e=t.length;if(0===e)return null;let i=t.pop();if(i<0||i>this.children.length)return t[e-2];if(e>2){for(let s=0;s<e-1;s++)this.addChildAt(t[s],i++);return t[e-2]}let s=t[0],n=s.parent,r=n===this;return n&&n._removeChildAt(n.children.indexOf(s),r),s.parent=this,this.children.splice(i++,0,s),r||s.dispatchEvent("added"),s}removeChild(...t){const e=t.length;if(0===e)return!0;if(e>1){let i=!0;for(let s=0;s<e;s++)i=i&&this.removeChild(t[s]);return i}return this._removeChildAt(this.children.indexOf(t[0]))}removeChildAt(...t){const e=t.length;if(0===e)return!0;if(e>1){t.sort(((t,e)=>e-t));let i=!0;for(let s=0;s<e;s++)i=i&&this._removeChildAt(t[s]);return i}return this._removeChildAt(t[0])}removeAllChildren(){let t=this.children;for(;t.length;)this._removeChildAt(0)}getChildAt(t){return this.children[t]}getChildByName(t){let e=this.children;const i=e.length;for(let s=0;s<i;s++)if(e[s].name===t)return e[s];return null}sortChildren(t){this.children.sort(t)}getChildIndex(t){return this.children.indexOf(t)}swapChildrenAt(t,e){let i=this.children,s=i[t],n=i[e];s&&n&&(i[t]=n,i[e]=s)}swapChildren(t,e){let i=this.children;const s=i.length;let n,r;for(var h=0;h<s&&(i[h]===t&&(n=h),i[h]===e&&(r=h),null==n||null==r);h++);h!==s&&(i[n]=e,i[r]=t)}setChildIndex(t,e){let i=this.children;const s=i.length;if(!(t.parent!=this||e<0||e>=s)){for(var n=0;n<s&&i[n]!==t;n++);n!==s&&n!==e&&(i.splice(n,1),i.splice(e,0,t))}}contains(t){for(;t;){if(t===this)return!0;t=t.parent}return!1}hitTest(t,e){return null!=this.getObjectUnderPoint(t,e)}getObjectsUnderPoint(t,e,i=0){let s=[],n=this.localToGlobal(t,e);return this._getObjectsUnderPoint(n.x,n.y,s,i>0,1===i),s}getObjectUnderPoint(t,e,i=0){let s=this.localToGlobal(t,e);return this._getObjectsUnderPoint(s.x,s.y,null,i>0,1===i)}getBounds(){return this._getBounds(null,!0)}getTransformedBounds(){return this._getBounds()}clone(t=!1){let e=this._cloneProps(new y);return t&&this._cloneChildren(e),e}_tick(t){if(this.tickChildren)for(let e=this.children.length-1;e>=0;e--){let i=this.children[e];i.tickEnabled&&i._tick&&i._tick(t)}super._tick(t)}_cloneChildren(t){t.children.length&&t.removeAllChildren();let e=t.children;const i=this.children.length;for(let s=0;s<i;s++){let i=this.children[s].clone(!0);i.parent=t,e.push(i)}}_removeChildAt(t,e=!1){if(t<0||t>this.children.length-1)return!1;let i=this.children[t];return i&&(i.parent=null),this.children.splice(t,1),e||i.dispatchEvent("removed"),!0}_getObjectsUnderPoint(t,e,i,s,n,r=0){if(!r&&!this._testMask(this,t,e))return null;let h,a=b._hitTestContext;n=n||s&&this._hasMouseEventListener();let o=this.children;for(let l=o.length-1;l>=0;l--){let d=o[l],u=d.hitArea;if(d.visible&&(u||d.isVisible())&&(!s||d.mouseEnabled)&&(u||this._testMask(d,t,e)))if(!u&&d instanceof y){let h=d._getObjectsUnderPoint(t,e,i,s,n,r+1);if(!i&&h)return s&&!this.mouseChildren?this:h}else{if(s&&!n&&!d._hasMouseEventListener())continue;let r=d.getConcatenatedDisplayProps(d._props);if(h=r.matrix,u&&(h.appendMatrix(u.getMatrix(u._props.matrix)),r.alpha=u.alpha),a.globalAlpha=r.alpha,a.setTransform(h.a,h.b,h.c,h.d,h.tx-t,h.ty-e),(u||d).draw(a),!this._testHit(a))continue;if(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,2,2),!i)return s&&!this.mouseChildren?this:d;i.push(d)}}return null}_testMask(t,e,i){let s=t.mask;if(!s||!s.graphics||s.graphics.isEmpty())return!0;let n=this._props.matrix,r=t.parent;n=r?r.getConcatenatedMatrix(n):n.identity(),n=s.getMatrix(s._props.matrix).prependMatrix(n);let h=b._hitTestContext;return h.setTransform(n.a,n.b,n.c,n.d,n.tx-e,n.ty-i),s.graphics.drawAsPath(h),h.fillStyle="#000",h.fill(),!!this._testHit(h)&&(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,2,2),!0)}_getBounds(t,e){let i=super.getBounds();if(i)return this._transformBounds(i,t,e);let s=this._props.matrix;s=e?s.identity():this.getMatrix(s),t&&s.prependMatrix(t);const n=this.children.length;let r=null;for(let t=0;t<n;t++){let e=this.children[t];e.visible&&(i=e._getBounds(s))&&(r?r.extend(i.x,i.y,i.width,i.height):r=i.clone())}return r}}class T extends h{constructor(t,e,i,s,n,r,h,a,o,l,d){super(t,e,i),this.stageX=s,this.stageY=n,this.rawX=null==o?s:o,this.rawY=null==l?n:l,this.nativeEvent=r,this.pointerID=h,this.primary=!!a,this.relatedTarget=d}get localX(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x}get localY(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y}get isTouch(){return-1!==this.pointerID}clone(){return new T(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)}toString(){return`[${this.constructor.name} (type=${this.type} stageX=${this.stageX} stageY=${this.stageY})]`}}class E extends y{constructor(t){super(),this.autoClear=!0,this.canvas="string"==typeof t?document.getElementById(t):t,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}get nextStage(){return this._nextStage}set nextStage(t){this._nextStage&&(this._nextStage._prevStage=null),t&&(t._prevStage=this),this._nextStage=t}update(t){if(!this.canvas)return;if(this.tickOnUpdate&&this.tick(t),!1===this.dispatchEvent("drawstart",!1,!0))return;b._snapToPixelEnabled=this.snapToPixelEnabled;let e=this.drawRect,i=this.canvas.getContext("2d");i.setTransform(1,0,0,1,0,0),this.autoClear&&(e?i.clearRect(e.x,e.y,e.width,e.height):i.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),i.save(),this.drawRect&&(i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.clip()),this.updateContext(i),this.draw(i,!1),i.restore(),this.dispatchEvent("drawend")}tick(t){if(!this.tickEnabled||!1===this.dispatchEvent("tickstart",!1,!0))return;let e=new h("tick");if(t)for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);this._tick(e),this.dispatchEvent("tickend")}handleEvent(t){"tick"===t.type&&this.update(t)}clear(){if(!this.canvas)return;let t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}toDataURL(t,e="image/png"){let i,s=this.canvas.getContext("2d"),n=this.canvas.width,r=this.canvas.height;if(t){i=s.getImageData(0,0,n,r);var h=s.globalCompositeOperation;s.globalCompositeOperation="destination-over",s.fillStyle=t,s.fillRect(0,0,n,r)}let a=this.canvas.toDataURL(e);return t&&(s.putImageData(i,0,0),s.globalCompositeOperation=h),a}enableMouseOver(t=20){this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0===t&&this._testMouseOver(!0)),t<=0||(this._mouseOverIntervalID=setInterval((()=>this._testMouseOver()),1e3/Math.min(50,t)))}enableDOMEvents(t=!0){let e=this._eventListeners;if(!t&&e){for(let t in e){let i=e[t];i.t.removeEventListener(t,i.f,!1)}this._eventListeners=null}else if(t&&!e&&this.canvas){let t=window.addEventListener?window:document;e=this._eventListeners={mouseup:{t:t,f:t=>this._handleMouseUp(t)},mousemove:{t:t,f:t=>this._handleMouseMove(t)},dblclick:{t:this.canvas,f:t=>this._handleDoubleClick(t)},mousedown:{t:this.canvas,f:t=>this._handleMouseDown(t)}};for(let t in e){let i=e[t];i.t.addEventListener&&i.t.addEventListener(t,i.f,!1)}}}clone(){throw"Stage cannot be cloned."}_getElementRect(t){let e;try{e=t.getBoundingClientRect()}catch(i){e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}let i=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),s=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),n=window.getComputedStyle?getComputedStyle(t,null):t.currentStyle,r=parseInt(n.paddingLeft)+parseInt(n.borderLeftWidth),h=parseInt(n.paddingTop)+parseInt(n.borderTopWidth),a=parseInt(n.paddingRight)+parseInt(n.borderRightWidth),o=parseInt(n.paddingBottom)+parseInt(n.borderBottomWidth);return{left:e.left+i+r,right:e.right+i-a,top:e.top+s+h,bottom:e.bottom+s-o}}_getPointerData(t){let e=this._pointerData[t];return e||(e=this._pointerData[t]={x:0,y:0}),e}_handleMouseMove(t=window.event){this._handlePointerMove(-1,t,t.pageX,t.pageY)}_handlePointerMove(t,e,i,s,n){if(this._prevStage&&void 0===n)return;if(!this.canvas)return;let r=this._nextStage,h=this._getPointerData(t),a=h.inBounds;this._updatePointerPosition(t,e,i,s),(a||h.inBounds||this.mouseMoveOutside)&&(-1===t&&h.inBounds===!a&&this._dispatchMouseEvent(this,a?"mouseleave":"mouseenter",!1,t,h,e),this._dispatchMouseEvent(this,"stagemousemove",!1,t,h,e),this._dispatchMouseEvent(h.target,"pressmove",!0,t,h,e)),r&&r._handlePointerMove(t,e,i,s,null)}_updatePointerPosition(t,e,i,s){let n=this._getElementRect(this.canvas);i-=n.left,s-=n.top;let r=this.canvas.width,h=this.canvas.height;i/=(n.right-n.left)/r,s/=(n.bottom-n.top)/h;let a=this._getPointerData(t);(a.inBounds=i>=0&&s>=0&&i<=r-1&&s<=h-1)?(a.x=i,a.y=s):this.mouseMoveOutside&&(a.x=i<0?0:i>r-1?r-1:i,a.y=s<0?0:s>h-1?h-1:s),a.posEvtObj=e,a.rawX=i,a.rawY=s,t!==this._primaryPointerID&&-1!==t||(this.mouseX=a.x,this.mouseY=a.y,this.mouseInBounds=a.inBounds)}_handleMouseUp(t){this._handlePointerUp(-1,t,!1)}_handlePointerUp(t,e,i,s){let n=this._nextStage,r=this._getPointerData(t);if(this._prevStage&&void 0===s)return;let h=null,a=r.target;s||!a&&!n||(h=this._getObjectsUnderPoint(r.x,r.y,null,!0)),r.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,t,r,e,h),r.down=!1),h===a&&this._dispatchMouseEvent(a,"click",!0,t,r,e),this._dispatchMouseEvent(a,"pressup",!0,t,r,e),i?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):r.target=null,n&&n._handlePointerUp(t,e,i,s||h&&this)}_handleMouseDown(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)}_handlePointerDown(t,e,i,s,n){this.preventSelection&&e.preventDefault(),null!=this._primaryPointerID&&-1!==t||(this._primaryPointerID=t),null!=s&&this._updatePointerPosition(t,e,i,s);let r=null,h=this._nextStage,a=this._getPointerData(t);n||(r=a.target=this._getObjectsUnderPoint(a.x,a.y,null,!0)),a.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,t,a,e,r),a.down=!0),this._dispatchMouseEvent(r,"mousedown",!0,t,a,e),h&&h._handlePointerDown(t,e,i,s,n||r&&this)}_testMouseOver(t,e,i){if(this._prevStage&&void 0===e)return;let s=this._nextStage;if(!this._mouseOverIntervalID)return void(s&&s._testMouseOver(t,e,i));let n=this._getPointerData(-1);if(!n||!t&&this.mouseX===this._mouseOverX&&this.mouseY===this._mouseOverY&&this.mouseInBounds)return;let r=n.posEvtObj,h=i||r&&r.target===this.canvas,a=null,o=-1,l="";!e&&(t||this.mouseInBounds&&h)&&(a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);let d=this._mouseOverTarget||[],u=d[d.length-1],c=this._mouseOverTarget=[],p=a;for(;p;)c.unshift(p),l||(l=p.cursor),p=p.parent;this.canvas.style.cursor=l,!e&&i&&(i.canvas.style.cursor=l);for(let t=0,e=c.length;t<e&&c[t]==d[t];t++)o=t;u!=a&&this._dispatchMouseEvent(u,"mouseout",!0,-1,n,r,a);for(let t=d.length-1;t>o;t--)this._dispatchMouseEvent(d[t],"rollout",!1,-1,n,r,a);for(let t=c.length-1;t>o;t--)this._dispatchMouseEvent(c[t],"rollover",!1,-1,n,r,u);u!=a&&this._dispatchMouseEvent(a,"mouseover",!0,-1,n,r,u),s&&s._testMouseOver(t,e||a&&this,i||h&&this)}_handleDoubleClick(t,e){let i=null,s=this._nextStage,n=this._getPointerData(-1);e||(i=this._getObjectsUnderPoint(n.x,n.y,null,!0),this._dispatchMouseEvent(i,"dblclick",!0,-1,n,t)),s&&s._handleDoubleClick(t,e||i&&this)}_dispatchMouseEvent(t,e,i,s,n,r,h){if(!t||!i&&!t.hasEventListener(e))return;let a=new T(e,i,!1,n.x,n.y,r,s,s===this._primaryPointerID||-1===s,n.rawX,n.rawY,h);t.dispatchEvent(a)}}function S(t=1,e=1){let i;if(void 0!==window.createjs&&void 0!==window.createjs.createCanvas&&(i=window.createjs.createCanvas()),void 0!==window.document&&void 0!==window.document.createElement&&(i=document.createElement("canvas")),void 0!==i)return i.width=t,i.height=e,i;throw"Canvas not supported in this environment."}class C extends b{constructor(t,e){super(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=t,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,this._webGLRenderStyle=b._StageGL_SPRITE,null!=e&&this.gotoAndPlay(e)}isVisible(){let t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)}draw(t,e){if(super.draw(t,e))return!0;this._normalizeFrame();let i=this.spriteSheet.getFrame(0|this._currentFrame);if(!i)return!1;let s=i.rect;return s.width&&s.height&&t.drawImage(i.image,s.x,s.y,s.width,s.height,-i.regX,-i.regY,s.width,s.height),!0}play(){this.paused=!1}stop(){this.paused=!0}gotoAndPlay(t){this.paused=!1,this._skipAdvance=!0,this._goto(t)}gotoAndStop(t){this.paused=!0,this._goto(t)}advance(t){let e=this.framerate||this.spriteSheet.framerate,i=e&&null!=t?t/(1e3/e):1;this._normalizeFrame(i)}getBounds(){return super.getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)}clone(){return this._cloneProps(new C(this.spriteSheet))}_cloneProps(t){return super._cloneProps(t),t.currentFrame=this.currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate,t._animation=this._animation,t._currentFrame=this._currentFrame,t._skipAdvance=this._skipAdvance,t}_tick(t){this.paused||(this._skipAdvance||this.advance(t&&t.delta),this._skipAdvance=!1),super._tick(t)}_normalizeFrame(t=0){let e=this._animation,i=this.paused,s=this._currentFrame;if(e){let n=e.speed||1,r=this.currentAnimationFrame,h=e.frames.length;if(r+t*n>=h){let a=e.next;if(this._dispatchAnimationEnd(e,s,i,a,h-1))return;if(a)return this._goto(a,t-(h-r)/n);this.paused=!0,r=e.frames.length-1}else r+=t*n;this.currentAnimationFrame=r,this._currentFrame=e.frames[0|r]}else{s=this._currentFrame+=t;let n=this.spriteSheet.getNumFrames();if(s>=n&&n>0&&!this._dispatchAnimationEnd(e,s,i,n-1)&&(this._currentFrame-=n)>=n)return this._normalizeFrame()}s=0|this._currentFrame,this.currentFrame!=s&&(this.currentFrame=s,this.dispatchEvent("change"))}_dispatchAnimationEnd(t,e,i,s,n){let r=t?t.name:null;if(this.hasEventListener("animationend")){let t=new h("animationend");t.name=r,t.next=s,this.dispatchEvent(t)}let a=this._animation!=t||this._currentFrame!=e;return a||i||!this.paused||(this.currentAnimationFrame=n,a=!0),a}_goto(t,e=0){if(this.currentAnimationFrame=0,isNaN(t)){let i=this.spriteSheet.getAnimation(t);i&&(this._animation=i,this.currentAnimation=t,this._normalizeFrame(e))}else this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()}}class M extends y{constructor(t="",e=null){super(),this.text=t,this.spriteSheet=e,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0},this._oldStage=null,this._drawAction=null}draw(t,e){this.drawCache(t,e)||(this._updateState(),super.draw(t,e))}getBounds(){return this._updateText(),super.getBounds()}isVisible(){let t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&t)}clone(){return this._cloneProps(new M(this.text,this.spriteSheet))}addChild(){}addChildAt(){}removeChild(){}removeChildAt(){}removeAllChildren(){}_updateState(){this._updateText()}_cloneProps(t){return super._cloneProps(t),t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.spaceWidth=this.spaceWidth,t}_getFrameIndex(t,e){let i,s=e.getAnimation(t);return s||(t!=(i=t.toUpperCase())||t!=(i=t.toLowerCase())||(i=null),i&&(s=e.getAnimation(i))),s&&s.frames[0]}_getFrame(t,e){let i=this._getFrameIndex(t,e);return null==i?i:e.getFrame(i)}_getLineHeight(t){let e=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return e?e.rect.height:1}_getSpaceWidth(t){let e=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return e?e.rect.width:1}_tick(t){let e=this.stage;e&&e.on("drawstart",this._updateText,this,!0),super._tick(t)}_updateText(){let t,e=0,i=0,s=this._oldProps,n=!1,r=this.spaceWidth,h=this.lineHeight,a=this.spriteSheet,o=M._spritePool,l=this.children,d=0,u=l.length;for(let t in s)s[t]!=this[t]&&(s[t]=this[t],n=!0);if(!n)return;let c=!!this._getFrame(" ",a);c||r||(r=this._getSpaceWidth(a)),h||(h=this._getLineHeight(a));for(let s=0,n=this.text.length;s<n;s++){let n=this.text.charAt(s);if(" "===n&&!c){e+=r;continue}if("\n"===n||"\r"===n){"\r"===n&&"\n"===this.text.charAt(s+1)&&s++,e=0,i+=h;continue}let p=this._getFrameIndex(n,a);null!=p&&(d<u?t=l[d]:(l.push(t=o.length?o.pop():new C),t.parent=this,u++),t.spriteSheet=a,t.gotoAndStop(p),t.x=e,t.y=i,d++,e+=t.getBounds().width+this.letterSpacing)}for(;u>d;)o.push(t=l.pop()),t.parent=null,u--;o.length>M.maxPoolSize&&(o.length=M.maxPoolSize)}}M.maxPoolSize=100,M._spritePool=[];class P{constructor(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._fill=null,this._strokeIgnoreScale=!1,this._commitIndex=0,this._instructions=[],this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.curveTo=this.quadraticCurveTo,this.drawRect=this.rect,this.mt=this.moveTo,this.lt=this.lineTo,this.at=this.arcTo,this.bt=this.bezierCurveTo,this.qt=this.quadraticCurveTo,this.a=this.arc,this.r=this.rect,this.cp=this.closePath,this.c=this.clear,this.f=this.beginFill,this.lf=this.beginLinearGradientFill,this.rf=this.beginRadialGradientFill,this.bf=this.beginBitmapFill,this.ef=this.endFill,this.ss=this.setStrokeStyle,this.sd=this.setStrokeDash,this.s=this.beginStroke,this.ls=this.beginLinearGradientStroke,this.rs=this.beginRadialGradientStroke,this.bs=this.beginBitmapStroke,this.es=this.endStroke,this.dr=this.drawRect,this.rr=this.drawRoundRect,this.rc=this.drawRoundRectComplex,this.dc=this.drawCircle,this.de=this.drawEllipse,this.dp=this.drawPolyStar,this.p=this.decodePath,this.clear()}static getRGB(t,e,i,s){return null!=t&&null==i&&(s=e,i=255&t,e=t>>8&255,t=t>>16&255),null==s?`rgb(${t},${e},${i})`:`rgba(${t},${e},${i},${s})`}static getHSL(t,e,i,s){return null==s?`hsl(${t%360},${e}%,${i}%)`:`hsl(${t%360},${e}%,${i}%,${s})`}get instructions(){return this._updateInstructions(),this._instructions}isEmpty(){return!(this._instructions.length||this._activeInstructions.length)}draw(t,e){this._updateInstructions();let i=this._instructions;const s=i.length;for(let n=this._storeIndex;n<s;n++)i[n].exec(t,e)}drawAsPath(t){this._updateInstructions();let e,i=this._instructions;const s=i.length;for(let n=this._storeIndex;n<s;n++)!1!==(e=i[n]).path&&e.exec(t)}moveTo(t,e){return this.append(new k(t,e),!0)}lineTo(t,e){return this.append(new I(t,e))}arcTo(t,e,i,s,n){return this.append(new L(t,e,i,s,n))}arc(t,e,i,s,n,r){return this.append(new A(t,e,i,s,n,r))}quadraticCurveTo(t,e,i,s){return this.append(new D(t,e,i,s))}bezierCurveTo(t,e,i,s,n,r){return this.append(new O(t,e,i,s,n,r))}rect(t,e,i,s){return this.append(new R(t,e,i,s))}closePath(){return this._activeInstructions.length?this.append(new F):this}clear(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this}beginFill(t){return this._setFill(t?new N(t):null)}beginLinearGradientFill(t,e,i,s,n,r){return this._setFill((new N).linearGradient(t,e,i,s,n,r))}beginRadialGradientFill(t,e,i,s,n,r,h,a){return this._setFill((new N).radialGradient(t,e,i,s,n,r,h,a))}beginBitmapFill(t,e,i){return this._setFill(new N(null,i).bitmap(t,e))}endFill(){return this.beginFill()}setStrokeStyle(t,e=0,i=0,s=10,n=!1){return this._updateInstructions(!0),this._strokeStyle=this.command=new Y(t,e,i,s,n),this._stroke&&(this._stroke.ignoreScale=n),this._strokeIgnoreScale=n,this}setStrokeDash(t,e=0){return this._updateInstructions(!0),this._strokeDash=this.command=new H(t,e),this}beginStroke(t){return this._setStroke(t?new X(t):null)}beginLinearGradientStroke(t,e,i,s,n,r){return this._setStroke((new X).linearGradient(t,e,i,s,n,r))}beginRadialGradientStroke(t,e,i,s,n,r,h,a){return this._setStroke((new X).radialGradient(t,e,i,s,n,r,h,a))}beginBitmapStroke(t,e="repeat"){return this._setStroke((new X).bitmap(t,e))}endStroke(){return this.beginStroke()}drawRoundRect(t,e,i,s,n){return this.drawRoundRectComplex(t,e,i,s,n,n,n,n)}drawRoundRectComplex(t,e,i,s,n,r,h,a){return this.append(new G(t,e,i,s,n,r,h,a))}drawCircle(t,e,i){return this.append(new W(t,e,i))}drawEllipse(t,e,i,s){return this.append(new j(t,e,i,s))}drawPolyStar(t,e,i,s,n,r){return this.append(new $(t,e,i,s,n,r))}append(t,e){return this._activeInstructions.push(t),this.command=t,e||(this._dirty=!0),this}decodePath(t){let e=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],i=[2,2,4,6,0],s=0;const n=t.length;let r=[],h=0,a=0,o=P._BASE_64;for(;s<n;){let n=o[t.charAt(s)],l=n>>3,d=e[l];if(!d||3&n)throw`Bad path data (@${s}):c`;const u=i[l];l||(h=a=0),r.length=0,s++;let c=2+(n>>2&1);for(let e=0;e<u;e++){let i=o[t.charAt(s)],n=i>>5?-1:1;i=(31&i)<<6|o[t.charAt(s+1)],3===c&&(i=i<<6|o[t.charAt(s+2)]),i=n*i/10,e%2?h=i+=h:a=i+=a,r[e]=i,s+=c}d.apply(this,r)}return this}store(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this}unstore(){return this._storeIndex=0,this}clone(){let t=new P;return t.command=this.command,t._stroke=this._stroke,t._strokeStyle=this._strokeStyle,t._strokeDash=this._strokeDash,t._strokeIgnoreScale=this._strokeIgnoreScale,t._fill=this._fill,t._instructions=this._instructions.slice(),t._commitIndex=this._commitIndex,t._activeInstructions=this._activeInstructions.slice(),t._dirty=this._dirty,t._storeIndex=this._storeIndex,t}toString(){return`[${this.constructor.name}]`}_updateInstructions(t){let e=this._instructions,i=this._activeInstructions,s=this._commitIndex;if(this._dirty&&i.length){e.length=s,e.push(P.beginCmd);const n=i.length,r=e.length;e.length=r+n;for(let t=0;t<n;t++)e[t+r]=i[t];this._fill&&e.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&e.push(this._strokeDash),this._strokeStyle!==this._oldStrokeStyle&&e.push(this._strokeStyle),t&&(this._oldStrokeDash=this._strokeDash,this._oldStrokeStyle=this._strokeStyle),e.push(this._stroke)),this._dirty=!1}t&&(i.length=0,this._commitIndex=e.length)}_setFill(t){return this._updateInstructions(!0),this.command=this._fill=t,this}_setStroke(t){return this._updateInstructions(!0),(this.command=this._stroke=t)&&(t.ignoreScale=this._strokeIgnoreScale),this}static get LineTo(){return I}static get MoveTo(){return k}static get ArcTo(){return L}static get Arc(){return A}static get QuadraticCurveTo(){return D}static get BezierCurveTo(){return O}static get Rect(){return R}static get ClosePath(){return F}static get BeginPath(){return B}static get Fill(){return N}static get Stroke(){return X}static get StrokeStyle(){return Y}static get StrokeDash(){return H}static get RoundRect(){return G}static get Circle(){return W}static get Ellipse(){return j}static get PolyStar(){return $}}class I{constructor(t,e){this.x=t,this.y=e}exec(t){t.lineTo(this.x,this.y)}}class k{constructor(t,e){this.x=t,this.y=e}exec(t){t.moveTo(this.x,this.y)}}class L{constructor(t,e,i,s,n){this.x1=t,this.y1=e,this.x2=i,this.y2=s,this.radius=n}exec(t){t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}}class A{constructor(t,e,i,s,n,r=!1){this.x=t,this.y=e,this.radius=i,this.startAngle=s,this.endAngle=n,this.anticlockwise=r}exec(t){t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}}class D{constructor(t,e,i,s){this.cpx=t,this.cpy=e,this.x=i,this.y=s}exec(t){t.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)}}class O{constructor(t,e,i,s,n,r){this.cp1x=t,this.cp1y=e,this.cp2x=i,this.cp2y=s,this.x=n,this.y=r}exec(t){t.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)}}class R{constructor(t,e,i,s){this.x=t,this.y=e,this.w=i,this.h=s}exec(t){t.rect(this.x,this.y,this.w,this.h)}}class F{constructor(){}exec(t){t.closePath()}}class B{constructor(){}exec(t){t.beginPath()}}class N{constructor(t,e){this.style=t,this.matrix=e,this.path=!1}exec(t){if(!this.style)return;t.fillStyle=this.style;let e=this.matrix;e&&(t.save(),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),t.fill(),e&&t.restore()}linearGradient(t,e,i,s,n,r){let h=this.style=P._ctx.createLinearGradient(i,s,n,r);const a=t.length;for(let i=0;i<a;i++)h.addColorStop(e[i],t[i]);return h.props={colors:t,ratios:e,x0:i,y0:s,x1:n,y1:r,type:"linear"},this}radialGradient(t,e,i,s,n,r,h,a){let o=this.style=P._ctx.createRadialGradient(i,s,n,r,h,a);const l=t.length;for(let i=0;i<l;i++)o.addColorStop(e[i],t[i]);return o.props={colors:t,ratios:e,x0:i,y0:s,r0:n,x1:r,y1:h,r1:a,type:"radial"},this}bitmap(t,e=""){if(t.naturalWidth||t.getContext||t.readyState>=2){(this.style=P._ctx.createPattern(t,e)).props={image:t,repetition:e,type:"bitmap"}}return this}}class X extends N{constructor(t,e){super(),this.style=t,this.ignoreScale=e,this.path=!1}exec(t){this.style&&(t.strokeStyle=this.style,this.ignoreScale&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.stroke(),this.ignoreScale&&t.restore())}}class Y{constructor(t=1,e="butt",i="miter",s=10,n=!1){this.width=t,this.caps=e,this.joints=i,this.miterLimit=s,this.ignoreScale=n,this.path=!1}exec(t){t.lineWidth=this.width,t.lineCap=isNaN(this.caps)?this.caps:P._STROKE_CAPS_MAP[this.caps],t.lineJoin=isNaN(this.joints)?this.joints:P._STROKE_JOINTS_MAP[this.joints],t.miterLimit=this.miterLimit,t.ignoreScale=this.ignoreScale}}class H{constructor(t=[],e=0){this.segments=t,this.offset=e}exec(t){t.setLineDash&&(t.setLineDash(this.segments),t.lineDashOffset=this.offset)}}class G{constructor(t,e,i,s,n,r,h,a){this.x=t,this.y=e,this.w=i,this.h=s,this.radiusTL=n,this.radiusTR=r,this.radiusBR=h,this.radiusBL=a}exec(t){let e=(this.w<this.h?this.w:this.h)/2,i=0,s=0,n=0,r=0,h=this.x,a=this.y,o=this.w,l=this.h,d=this.radiusTL,u=this.radiusTR,c=this.radiusBR,p=this.radiusBL;d<0&&(d*=i=-1),d>e&&(d=e),u<0&&(u*=s=-1),u>e&&(u=e),c<0&&(c*=n=-1),c>e&&(c=e),p<0&&(p*=r=-1),p>e&&(p=e),t.moveTo(h+o-u,a),t.arcTo(h+o+u*s,a-u*s,h+o,a+u,u),t.lineTo(h+o,a+l-c),t.arcTo(h+o+c*n,a+l+c*n,h+o-c,a+l,c),t.lineTo(h+p,a+l),t.arcTo(h-p*r,a+l+p*r,h,a+l-p,p),t.lineTo(h,a+d),t.arcTo(h-d*i,a-d*i,h+d,a,d),t.closePath()}}class W{constructor(t,e,i){this.x=t,this.y=e,this.radius=i}exec(t){t.arc(this.x,this.y,this.radius,0,2*Math.PI)}}class j{constructor(t,e,i,s){this.x=t,this.y=e,this.w=i,this.h=s}exec(t){let e=this.x,i=this.y,s=this.w,n=this.h,r=.5522848,h=s/2*r,a=n/2*r,o=e+s,l=i+n,d=e+s/2,u=i+n/2;t.moveTo(e,u),t.bezierCurveTo(e,u-a,d-h,i,d,i),t.bezierCurveTo(d+h,i,o,u-a,o,u),t.bezierCurveTo(o,u+a,d+h,l,d,l),t.bezierCurveTo(d-h,l,e,u+a,e,u)}}class ${constructor(t,e,i,s,n=0,r=0){this.x=t,this.y=e,this.radius=i,this.sides=s,this.pointSize=n,this.angle=r}exec(t){let e=this.x,i=this.y,s=this.radius,n=this.angle/180*Math.PI,r=this.sides,h=1-this.pointSize,a=Math.PI/r;t.moveTo(e+Math.cos(n)*s,i+Math.sin(n)*s);for(let o=0;o<r;o++)n+=a,1!=h&&t.lineTo(e+Math.cos(n)*s*h,i+Math.sin(n)*s*h),n+=a,t.lineTo(e+Math.cos(n)*s,i+Math.sin(n)*s);t.closePath()}}P.beginCmd=new B,P._BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},P._STROKE_CAPS_MAP=["butt","round","square"],P._STROKE_JOINTS_MAP=["miter","round","bevel"],P._ctx=S().getContext("2d");class U extends o{constructor(t){super(),this.ignoreGlobalPause=!1,this.loop=0,this.useTicks=!1,this.reversed=!1,this.bounce=!1,this.timeScale=1,this.duration=0,this.position=0,this.rawPosition=-1,this._paused=!0,this._next=null,this._prev=null,this._parent=null,this._labels=null,this._labelList=null,t&&(this.useTicks=!!t.useTicks,this.ignoreGlobalPause=!!t.ignoreGlobalPause,this.loop=!0===t.loop?-1:t.loop||0,this.reversed=!!t.reversed,this.bounce=!!t.bounce,this.timeScale=t.timeScale||1,t.onChange&&this.addEventListener("change",t.onChange),t.onComplete&&this.addEventListener("complete",t.onComplete))}get labels(){let t=this._labelList;if(!t){t=this._labelList=[];let e=this._labels;for(let i in e)t.push({label:i,position:e[i]});t.sort(((t,e)=>t.position-e.position))}return t}set labels(t){this._labels=t,this._labelList=null}get currentLabel(){let t=this.labels,e=this.position;for(let i=0,s=t.length;i<s&&!(e<t[i].position);i++);return 0===i?null:t[i-1].label}get paused(){return this._paused}set paused(t){At._register(this,t),this._paused=t}advance(t,e=!1){this.setPosition(this.rawPosition+t*this.timeScale,e)}setPosition(t,e=!1,i=!1,s){const n=this.duration,r=this.loop,h=this.rawPosition;let a=0,o=0,l=!1;if(t<0&&(t=0),0===n){if(l=!0,-1!==h)return l}else{if(a=t/n|0,o=t-a*n,l=-1!==r&&t>=r*n+n,l&&(t=(o=n)*(a=r)+n),t===h)return l;!this.reversed!=!(this.bounce&&a%2)&&(o=n-o)}this.position=o,this.rawPosition=t,this._updatePosition(i,l),l&&(this.paused=!0),s&&s(this),e||this._runActions(h,t,i,!i&&-1===h),this.dispatchEvent("change"),l&&this.dispatchEvent("complete")}calculatePosition(t){const e=this.duration,i=this.loop;let s=0,n=0;return 0===e?0:(-1!==i&&t>=i*e+e?(n=e,s=i):t<0?n=0:(s=t/e|0,n=t-s*e),!this.reversed!=!(this.bounce&&s%2)?e-n:n)}addLabel(t,e){this._labels||(this._labels={}),this._labels[t]=e;const s=this._labelList;if(s){for(let t=0,i=s.length;t<i&&!(e<s[t].position);t++);s.splice(i,0,{label:t,position:e})}}gotoAndPlay(t){this.paused=!1,this._goto(t)}gotoAndStop(t){this.paused=!0,this._goto(t)}resolve(t){const e=Number(t);return isNaN(e)?this._labels&&this._labels[t]:e}toString(){return`[${this.constructor.name}${this.name?` (name=${this.name})`:""}]`}clone(){throw"AbstractTween cannot be cloned."}_init(t){t&&t.paused||(this.paused=!1),t&&null!=t.position&&this.setPosition(t.position)}_goto(t){const e=this.resolve(t);null!=e&&this.setPosition(e,!1,!0)}_runActions(t,e,i,s){if(!this._actionHead&&!this.tweens)return;const n=this.duration,r=this.loop;let h,a,o,l,d=this.reversed,u=this.bounce;if(0===n?(h=a=o=l=0,d=u=!1):(h=t/n|0,a=e/n|0,o=t-h*n,l=e-a*n),-1!==r&&(a>r&&(l=n,a=r),h>r&&(o=n,h=r)),i)return this._runActionsRange(l,l,i,s);if(h===a&&o===l&&!i&&!s)return;-1===h&&(h=o=0);const c=t<=e;let p=h;do{let t=p===h?o:c?0:n,e=p===a?l:c?n:0;if(!d!=!(u&&p%2)&&(t=n-t,e=n-e),u&&p!==h&&t===e);else if(this._runActionsRange(t,e,i,s||p!==h&&!u))return!0;s=!1}while(c&&++p<=a||!c&&--p>=a)}_runActionsRange(t,e,i,s){throw"_runActionsRange is abstract and must be overridden by a subclass."}_updatePosition(t,e){throw"_updatePosition is abstract and must be overridden by a subclass."}}function z(t){return t}function q(t){return t<-1?t=-1:t>1&&(t=1),function(e){return 0==t?e:t<0?e*(e*-t+1+t):e*((2-e)*t+(1-t))}}function V(t){return function(e){return Math.pow(e,t)}}function J(t){return function(e){return 1-Math.pow(1-e,t)}}function Q(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}}function K(t){return 1-Math.cos(t*Math.PI/2)}function Z(t){return Math.sin(t*Math.PI/2)}function tt(t){return-.5*(Math.cos(Math.PI*t)-1)}function et(t){return function(e){return e*e*((t+1)*e-t)}}function it(t){return function(e){return--e*e*((t+1)*e+t)+1}}function st(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}function nt(t){return-(Math.sqrt(1-t*t)-1)}function rt(t){return Math.sqrt(1- --t*t)}function ht(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function at(t){return 1-Ease.bounceOut(1-t)}function ot(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function lt(t){return t<.5?.5*Ease.bounceIn(2*t):.5*Ease.bounceOut(2*t-1)+.5}function dt(t,e){let i=2*Math.PI;return function(s){if(0===s||1===s)return s;let n=e/i*Math.asin(1/t);return-t*Math.pow(2,10*(s-=1))*Math.sin((s-n)*i/e)}}function ut(t,e){let i=2*Math.PI;return function(s){if(0===s||1===s)return s;let n=e/i*Math.asin(1/t);return t*Math.pow(2,-10*s)*Math.sin((s-n)*i/e)+1}}function ct(t,e){let i=2*Math.PI;return function(s){let n=e/i*Math.asin(1/t);return(s*=2)<1?t*Math.pow(2,10*(s-=1))*Math.sin((s-n)*i/e)*-.5:t*Math.pow(2,-10*(s-=1))*Math.sin((s-n)*i/e)*.5+1}}const pt=z,_t=V(2),gt=J(2),mt=Q(2),ft=V(3),wt=J(3),vt=Q(3),xt=V(4),bt=J(4),yt=Q(4),Tt=V(5),Et=J(5),St=Q(5),Ct=et(1.7),Mt=it(1.7),Pt=st(1.7),It=dt(1,.3),kt=ut(1,.3),Lt=ct(1,.3*1.5);class At extends U{constructor(t,e){super(e),this.pluginData=null,this.target=t,this.passive=!1,this._stepHead=new Dt(null,0,0,{},null,!0),this._stepTail=this._stepHead,this._stepPosition=0,this._actionHead=null,this._actionTail=null,this._plugins=null,this._pluginIds=null,this._injected=null,e&&(this.pluginData=e.pluginData,e.override&&At.removeTweens(t)),this.pluginData||(this.pluginData={}),this._init(e)}static get(t,e){return new At(t,e)}static tick(t,e){let i=At._tweenHead;for(;i;){let s=i._next;e&&!i.ignoreGlobalPause||i._paused||i.advance(i.useTicks?1:t),i=s}}static handleEvent(t){"tick"===t.type&&this.tick(t.delta,t.paused)}static removeTweens(t){if(!t.tweenjs_count)return;let e=At._tweenHead;for(;e;){let i=e._next;e.target===t&&(e.paused=!0),e=i}t.tweenjs_count=0}static removeAllTweens(){let t=At._tweenHead;for(;t;){let e=t._next;t._paused=!0,t.target&&(t.target.tweenjs_count=0),t._next=t._prev=null,t=e}At._tweenHead=At._tweenTail=null}static hasActiveTweens(t){return t?!!t.tweenjs_count:!!At._tweenHead}static installPlugin(t,e){t.install(e);const s=t.priority=t.priority||0,n=At._plugins=At._plugins||[];for(let t=0,e=n.length;t<e&&!(s<n[t].priority);t++);n.splice(i,0,t)}static _register(t,e){const i=t.target;if(!e&&t._paused){i&&(i.tweenjs_count=i.tweenjs_count?i.tweenjs_count+1:1);let e=At._tweenTail;e?(At._tweenTail=e._next=t,t._prev=e):At._tweenHead=At._tweenTail=t,At._inited||(d.addEventListener("tick",At),At._inited=!0)}else if(e&&!t._paused){i&&i.tweenjs_count--;let e=t._next,s=t._prev;e?e._prev=s:At._tweenTail=s,s?s._next=e:At._tweenHead=e,t._next=t._prev=null}}wait(t,e=!1){return t>0&&this._addStep(+t,this._stepTail.props,null,e),this}to(t,e=0,i=z){e<0&&(e=0);const s=this._addStep(+e,null,i);return this._appendProps(t,s),this}label(t){return this.addLabel(t,this.duration),this}call(t,e,i){return this._addAction(i||this.target,t,e||[this])}set(t,e){return this._addAction(e||this.target,this._set,[t])}play(t){return this._addAction(t||this,this._set,[{paused:!1}])}pause(t){return this._addAction(t||this,this._set,[{paused:!1}])}clone(){throw"Tween can not be cloned."}_addPlugin(t){let e=this._pluginIds||(this._pluginIds={}),i=t.id;if(!i||e[i])return;e[i]=!0;let s=this._plugins||(this._plugins=[]),n=t.priority||0;for(let e=0,i=s.length;e<i;e++)if(n<s[e].priority)return void s.splice(e,0,t);s.push(t)}_updatePosition(t,e){let i=this._stepHead.next,s=this.position,n=this.duration;if(this.target&&i){let t=i.next;for(;t&&t.t<=s;)i=i.next,t=i.next;let r=e?0===n?1:s/n:(s-i.t)/i.d;this._updateTargetProps(i,r,e)}this._stepPosition=i?s-i.t:0}_updateTargetProps(t,e,i){if(this.passive=!!t.passive)return;let s,n,r,h,a=t.prev.props,o=t.props;(h=t.ease)&&(e=h(e,0,1,1));let l=this._plugins;t:for(let h in a){if(n=a[h],r=o[h],s=n!==r&&"number"==typeof n?n+(r-n)*e:e>=1?r:n,l)for(let n=0,r=l.length;n<r;n++){let r=l[n].change(this,t,h,s,e,i);if(r===At.IGNORE)continue t;void 0!==r&&(s=r)}this.target[h]=s}}_runActionsRange(t,e,i,s){let n=t>e,r=n?this._actionTail:this._actionHead,h=e,a=t;n&&(h=t,a=e);let o=this.position;for(;r;){let i=r.t;if((i===e||i>a&&i<h||s&&i===t)&&(r.funct.apply(r.scope,r.params),o!==this.position))return!0;r=n?r.prev:r.next}}_appendProps(t,e,i){let s,n,r,h,a,o=this._stepHead.props,l=this.target,d=At._plugins,u=e.prev,c=u.props,p=e.props||(e.props=this._cloneProps(c)),_={};for(s in t)if(t.hasOwnProperty(s)&&(_[s]=p[s]=t[s],void 0===o[s])){if(h=void 0,d)for(n=d.length-1;n>=0;n--)if(r=d[n].init(this,s,h),void 0!==r&&(h=r),h===At.IGNORE){(ignored=ignored||{})[s]=!0,delete p[s],delete _[s];break}h!==At.IGNORE&&(void 0===h&&(h=l[s]),c[s]=void 0===h?null:h)}for(s in _){r=t[s];let e,i=u;for(;(e=i)&&(i=e.prev);)if(i.props!==e.props){if(void 0!==i.props[s])break;i.props[s]=c[s]}}if(i&&(d=this._plugins))for(n=d.length-1;n>=0;n--)d[n].step(this,e,_);(a=this._injected)&&(this._injected=null,this._appendProps(a,e,!1))}_injectProp(t,e){(this._injected||(this._injected={}))[t]=e}_addStep(t,e,i,s=!1){let n=new Dt(this._stepTail,this.duration,t,e,i,s);return this.duration+=t,this._stepTail=this._stepTail.next=n}_addAction(t,e,i){let s=new Ot(this._actionTail,this.duration,t,e,i);return this._actionTail?this._actionTail.next=s:this._actionHead=s,this._actionTail=s,this}_set(t){for(let e in t)this[e]=t[e]}_cloneProps(t){let e={};for(let i in t)e[i]=t[i];return e}}{let t=At.prototype;t.w=t.wait,t.t=t.to,t.c=t.call,t.s=t.set}At.IGNORE={},At._tweens=[],At._plugins=null,At._tweenHead=null,At._tweenTail=null;class Dt{constructor(t,e,i,s,n,r){this.next=null,this.prev=t,this.t=e,this.d=i,this.props=s,this.ease=n,this.passive=r,this.index=t?t.index+1:0}}class Ot{constructor(t,e,i,s,n){this.next=null,this.d=0,this.prev=t,this.t=e,this.scope=i,this.funct=s,this.params=n}}class Rt extends U{constructor(t={}){super(t),this.tweens=[],t.tweens&&this.addTween(...t.tweens),t.labels&&(this.labels=t.labels),this._init(t)}addTween(...t){const e=t.length;if(1===e){const e=t[0];this.tweens.push(e),e._parent=this,e.paused=!0;let i=e.duration;return e.loop>0&&(i*=e.loop+1),i>this.duration&&(this.duration=i),this.rawPosition>=0&&e.setPosition(this.rawPosition),e}if(e>1){for(let i=0;i<e;i++)this.addTween(t[i]);return t[e-1]}return null}removeTween(...t){const e=t.length;if(1===e){const e=this.tweens,i=t[0];let s=e.length;for(;s--;)if(e[s]===i)return e.splice(s,1),i._parent=null,i.duration>=this.duration&&this.updateDuration(),!0;return!1}if(e>1){let i=!0;for(let s=0;s<e;s++)i=i&&this.removeTween(t[s]);return i}return!0}updateDuration(){this.duration=0;for(let t=0,e=this.tweens.length;t<e;t++){let e=this.tweens[t],i=e.duration;e.loop>0&&(i*=e.loop+1),i>this.duration&&(this.duration=i)}}clone(){throw"Timeline can not be cloned."}_updatePosition(t,e){const i=this.position;for(let e=0,s=this.tweens.length;e<s;e++)this.tweens[e].setPosition(i,!0,t)}_runActionsRange(t,e,i,s){const n=this.position;for(let r=0,h=this.tweens.length;r<h;r++)if(this.tweens[r]._runActions(t,e,i,s),n!==this.position)return!0}}class Ft extends y{constructor(t){super(),!Ft.inited&&Ft.init(),this.mode=null!=t.mode?t.mode:Ft.INDEPENDENT,this.startPosition=null!=t.startPosition?t.startPosition:0,"number"==typeof t.loop?this.loop=t.loop:!1===t.loop?this.loop=0:this.loop=-1,this.currentFrame=0,this.timeline=new Rt(Object.assign({useTicks:!0,paused:!0},t)),this.paused=null!=t.paused&&t.paused,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||t.frameBounds,this.framerate=null,this._synchOffset=0,this._rawPosition=-1,this._t=0,this._managed={},this._bound_resolveState=this._resolveState.bind(this)}static init(){Ft.inited||(Bt.install(),Ft.inited=!0)}get labels(){return this.timeline.labels}get currentLabel(){return this.timeline.currentLabel}get duration(){return this.timeline.duration}get totalFrames(){return this.duration}isVisible(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)}draw(t,e){return this.drawCache(t,e)||(this._updateState(),super.draw(t,e)),!0}play(){this.paused=!1}stop(){this.paused=!0}gotoAndPlay(t){this.play(),this._goto(t)}gotoAndStop(t){this.stop(),this._goto(t)}advance(t){if(this.mode!==Ft.INDEPENDENT)return;let e=this,i=e.framerate;for(;(e=e.parent)&&null===i;)e.mode===Ft.INDEPENDENT&&(i=e._framerate);if(this._framerate=i,this.paused)return;let s=null!==i&&-1!==i&&null!==t?t/(1e3/i)+this._t:1,n=0|s;for(this._t=s-n;n--;)this._updateTimeline(this._rawPosition+1,!1)}clone(){throw"MovieClip cannot be cloned."}_updateState(){-1!==this._rawPosition&&this.mode===Ft.INDEPENDENT||this._updateTimeline(-1)}_tick(t){this.advance(t&&t.delta),super._tick(t)}_goto(t){let e=this.timeline.resolve(t);null!=e&&(this._t=0,this._updateTimeline(e,!0))}_reset(){this._rawPosition=-1,this._t=this.currentFrame=0,this.paused=!1}_updateTimeline(t,e){let i=this.mode!==Ft.INDEPENDENT,s=this.timeline;i&&(t=this.startPosition+(this.mode===Ft.SINGLE_FRAME?0:this._synchOffset)),t<1&&(t=0),(this._rawPosition!==t||i)&&(this._rawPosition=t,s.loop=this.loop,s.setPosition(t,i||!this.actionsEnabled,e,this._bound_resolveState))}_renderFirstFrame(){const t=this.timeline,e=t.rawPosition;t.setPosition(0,!0,!0,this._bound_resolveState),t.rawPosition=e}_resolveState(){let t=this.timeline;this.currentFrame=t.position;for(let t in this._managed)this._managed[t]=1;let e=t.tweens;for(let t of e){let e=t.target;if(e===this||t.passive)continue;let i=t._stepPosition;e instanceof b?this._addManagedChild(e,i):this._setState(e.state,i)}let i=this.children;for(let t=i.length-1;t>=0;t--){let e=i[t].id;1===this._managed[e]&&(this.removeChildAt(t),delete this._managed[e])}}_setState(t,e){if(t)for(let i=t.length-1;i>=0;i--){let s=t[i],n=s.t,r=s.p;for(let t in r)n[t]=r[t];this._addManagedChild(n,e)}}_addManagedChild(t,e){t._off||(this.addChildAt(t,0),t instanceof Ft&&(t._synchOffset=e,t.mode===Ft.INDEPENDENT&&t.autoReset&&!this._managed[t.id]&&t._reset()),this._managed[t.id]=2)}_getBounds(t,e){let i=this.getBounds();return!i&&this.frameBounds&&(i=this._rectangle.copy(this.frameBounds[this.currentFrame])),i?this._transformBounds(i,t,e):super._getBounds(t,e)}}Ft.INDEPENDENT="independent",Ft.SINGLE_FRAME="single",Ft.SYNCHED="synched",Ft.inited=!1;class Bt{constructor(){throw"MovieClipPlugin cannot be instantiated."}static install(){At.installPlugin(Bt)}static init(t,e,i){return i}static tween(t,e,i,s,n,r,h,a){return t.target instanceof Ft?1===r?n[e]:s[e]:i}}Bt.priority=100;class Nt extends b{constructor(t=new P){super(),this.graphics=t}isVisible(){let t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)}draw(t,e=!1){return super.draw(t,e)||this.graphics.draw(t,this),!0}clone(t=!1){let e=t&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new Nt(e))}}class Xt extends o{constructor(t){super(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(t)}get animations(){return this._animations.slice()}getNumFrames(t){if(null==t)return this._frames?this._frames.length:this._numFrames||0;{let e=this._data[t];return null==e?0:e.frames.length}}getAnimation(t){return this._data[t]}getFrame(t){let e;return this._frames&&(e=this._frames[t])?e:null}getFrameBounds(t,e=new w){let i=this.getFrame(t);return i?e.setValues(-i.regX,-i.regY,i.rect.width,i.rect.height):null}toString(){return`[${this.constructor.name}]`}clone(){throw"SpriteSheet cannot be cloned."}_parseData(t){if(null!=t){if(this.framerate=t.framerate||0,t.images)for(let e of t.images){let t,i=this._images=[];"string"==typeof e&&(t=e,e=document.createElement("img"),e.src=t),i.push(e),e.getContext||e.naturalWidth||(this._loadCount++,this.complete=!1,e.onload=()=>this._handleImageLoad(t),e.onerror=()=>this._handleImageError(t))}if(null!=t.frames)if(Array.isArray(t.frames)){this._frames=[];for(let e of t.frames)this._frames.push({image:this._images[e[4]?e[4]:0],rect:new w(e[0],e[1],e[2],e[3]),regX:e[5]||0,regY:e[6]||0})}else{let e=t.frames;this._frameWidth=e.width,this._frameHeight=e.height,this._regX=e.regX||0,this._regY=e.regY||0,this._spacing=e.spacing||0,this._margin=e.margin||0,this._numFrames=e.count,0===this._loadCount&&this._calculateFrames()}if(this._animations=[],null!=t.animations){this._data={};let e=t.animations;for(let t in e){let i,s={name:t},n=e[t];if("number"==typeof n)i=s.frames=[n];else if(Array.isArray(n))if(1===n.length)s.frames=[n[0]];else{s.speed=n[3],s.next=n[2],i=s.frames=[];for(let t=n[0];t<=n[1];t++)i.push(t)}else{s.speed=n.speed,s.next=n.next;let t=n.frames;i=s.frames="number"==typeof t?[t]:t.slice(0)}!0!==s.next&&void 0!==s.next||(s.next=t),(!1===s.next||i.length<2&&s.next===t)&&(s.next=null),s.speed||(s.speed=1),this._animations.push(t),this._data[t]=s}}}}_handleImageLoad(t){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))}_handleImageError(t){let e=new h("error");e.src=t,this.dispatchEvent(e),0==--this._loadCount&&this.dispatchEvent("complete")}_calculateFrames(){if(this._frames||0===this._frameWidth)return;this._frames=[];let t=this._numFrames||1e5,e=0,i=this._frameWidth,s=this._frameHeight,n=this._spacing,r=this._margin;t:for(let h=0,a=this._images,o=a.length;h<o;h++){let o=a[h],l=o.width||o.naturalWidth,d=o.height||o.naturalHeight,u=r;for(;u<=d-r-s;){let h=r;for(;h<=l-r-i;){if(e>=t)break t;e++,this._frames.push({image:o,rect:new w(h,u,i,s),regX:this._regX,regY:this._regY}),h+=i+n}u+=s+n}}this._numFrames=e}}class Yt extends b{constructor(t,e,i){super(),this.text=t,this.font=e,this.color=i,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}isVisible(){let t=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)}draw(t,e){if(super.draw(t,e))return!0;let i=this.color||"#000";return this.outline?(t.strokeStyle=i,t.lineWidth=1*this.outline):t.fillStyle=i,this._drawText(this._prepContext(t)),!0}getMeasuredWidth(){return this._getMeasuredWidth(this.text)}getMeasuredLineHeight(){return 1.2*this._getMeasuredWidth("M")}getMeasuredHeight(){return this._drawText(null,{}).height}getBounds(){let t=super.getBounds();if(t)return t;if(null==this.text||""===this.text)return null;let e=this._drawText(null,{}),i=this.maxWidth&&this.maxWidth<e.width?this.maxWidth:e.width,s=i*Yt.H_OFFSETS[this.textAlign||"left"],n=(this.lineHeight||this.getMeasuredLineHeight())*Yt.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(s,n,i,e.height)}getMetrics(){let t={lines:[]};return t.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),t.vOffset=t.lineHeight*Yt.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,t,t.lines)}clone(){return this._cloneProps(new Yt(this.text,this.font,this.color))}toString(){return`[${this.constructor.name} (text=${this.text.length>20?this.text.substr(0,17)+"...":this.text})]`}_cloneProps(t){return super._cloneProps(t),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.maxWidth=this.maxWidth,t.outline=this.outline,t.lineHeight=this.lineHeight,t.lineWidth=this.lineWidth,t}_prepContext(t){return t.font=this.font||"10px sans-serif",t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t.lineJoin="miter",t.miterLimit=2.5,t}_drawText(t,e,i){const s=!!t;s||((t=Yt._ctx).save(),this._prepContext(t));let n=this.lineHeight||this.getMeasuredLineHeight(),r=0,h=0,a=String(this.text).split(/(?:\r\n|\r|\n)/);for(let o of a){let a=null;if(null!=this.lineWidth&&(a=t.measureText(o).width)>this.lineWidth){let e=o.split(/(\s)/);o=e[0],a=t.measureText(o).width;const l=e.length;for(let d=1;d<l;d+=2){let l=t.measureText(e[d]+e[d+1]).width;a+l>this.lineWidth?(s&&this._drawTextLine(t,o,h*n),i&&i.push(o),a>r&&(r=a),o=e[d+1],a=t.measureText(o).width,h++):(o+=e[d]+e[d+1],a+=l)}}s&&this._drawTextLine(t,o,h*n),i&&i.push(o),e&&null==a&&(a=t.measureText(o).width),a>r&&(r=a),h++}return e&&(e.width=r,e.height=h*n),s||t.restore(),e}_drawTextLine(t,e,i){this.outline?t.strokeText(e,0,i,this.maxWidth||65535):t.fillText(e,0,i,this.maxWidth||65535)}_getMeasuredWidth(t){let e=Yt._ctx;e.save();let i=this._prepContext(e).measureText(t).width;return e.restore(),i}}Yt.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},Yt.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},Yt._ctx=S().getContext("2d");class Ht extends v{constructor(t=0,e=0,i=1){super(),this._blurX=t,this._blurXTable=[],this._lastBlurX=null,this._blurY=e,this._blurYTable=[],this._lastBlurY=null,this._quality=isNaN(i)||i<1?1:i,this._lastQuality=null,this.FRAG_SHADER_TEMPLATE="\n\t\t\tuniform float xWeight[{{blurX}}];\n\t\t\tuniform float yWeight[{{blurY}}];\n\t\t\tuniform vec2 textureOffset;\n\t\t\tvoid main (void) {\n\t\t\t\tvec4 color = vec4(0.0);\n\n\t\t\t\tfloat xAdj = ({{blurX}}.0-1.0)/2.0;\n\t\t\t\tfloat yAdj = ({{blurY}}.0-1.0)/2.0;\n\t\t\t\tvec2 sampleOffset;\n\n\t\t\t\tfor(int i=0; i<{{blurX}}; i++) {\n\t\t\t\t\tfor(int j=0; j<{{blurY}}; j++) {\n\t\t\t\t\t\tsampleOffset = vRenderCoord + (textureOffset * vec2(float(i)-xAdj, float(j)-yAdj));\n\t\t\t\t\t\tcolor += texture2D(uSampler, sampleOffset) * (xWeight[i] * yWeight[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = color.rgba;\n\t\t\t}\n\t\t"}get blurX(){return this._blurX}set blurX(t){(isNaN(t)||t<0)&&(t=0),this._blurX=t}get blurY(){return this._blurY}set blurY(t){(isNaN(t)||t<0)&&(t=0),this._blurY=t}get quality(){return 0|this._quality}set quality(t){(isNaN(t)||t<0)&&(t=0),this._quality=t}get _buildShader(){const t=this._lastBlurX!==this._blurX,e=this._lastBlurY!==this._blurY,i=this._lastQuality!==this._quality;return t||e||i?((t||i)&&(this._blurXTable=this._getTable(this._blurX*this._quality)),(e||i)&&(this._blurYTable=this._getTable(this._blurY*this._quality)),this._updateShader(),this._lastBlurX=this._blurX,this._lastBlurY=this._blurY,void(this._lastQuality=this._quality)):this._compiledShader}set _builtShader(t){this._compiledShader=t}shaderParamSetup(t,e,i){t.uniform1fv(t.getUniformLocation(i,"xWeight"),this._blurXTable),t.uniform1fv(t.getUniformLocation(i,"yWeight"),this._blurYTable),t.uniform2f(t.getUniformLocation(i,"textureOffset"),2/(e._viewportWidth*this._quality),2/(e._viewportHeight*this._quality))}getBounds(t){let e=0|this.blurX,i=0|this.blurY;if(e<=0&&i<=0)return t;let s=Math.pow(this.quality,.2);return(t||new w).pad(i*s+1,e*s+1,i*s+1,e*s+1)}clone(){return new Ht(this.blurX,this.blurY,this.quality)}_updateShader(){let t=this.FRAG_SHADER_TEMPLATE;t=t.replace(/{{blurX}}/g,this._blurXTable.length.toFixed(0)),t=t.replace(/{{blurY}}/g,this._blurYTable.length.toFixed(0)),this.FRAG_SHADER_BODY=t}_getTable(t){if(t<=1)return[1];let e=[],i=Math.ceil(2*t);i+=i%2?0:1;let s=i/2|0;for(let t=-s;t<=s;t++){let i=t/s*4.2;e.push(1/Math.sqrt(2*Math.PI)*Math.pow(Math.E,-Math.pow(i,2)/4))}let n=e.reduce(((t,e)=>t+e),0);return e.map((t=>t/n))}_applyFilter(t){let e=this._blurX>>1;if(isNaN(e)||e<0)return!1;let i=this._blurY>>1;if(isNaN(i)||i<0)return!1;if(0===e&&0===i)return!1;let s=this.quality;(isNaN(s)||s<1)&&(s=1),s|=0,s>3&&(s=3),s<1&&(s=1);let n=t.data,r=0,h=0,a=0,o=0,l=0,d=0,u=0,c=0,p=0,_=0,g=0,m=0,f=0,w=0,v=0,x=e+e+1|0,b=i+i+1|0,y=0|t.width,T=0|t.height,E=y-1|0,S=T-1|0,C=e+1|0,M=i+1|0,P={r:0,b:0,g:0,a:0},I=P;for(a=1;a<x;a++)I=I.n={r:0,b:0,g:0,a:0};I.n=P;let k={r:0,b:0,g:0,a:0},L=k;for(a=1;a<b;a++)L=L.n={r:0,b:0,g:0,a:0};L.n=k;let A=null,D=0|Ht.MUL_TABLE[e],O=0|Ht.SHG_TABLE[e],R=0|Ht.MUL_TABLE[i],F=0|Ht.SHG_TABLE[i];for(;s-- >0;){u=d=0;let t=D,x=O;for(h=T;--h>-1;){for(c=C*(m=n[0|d]),p=C*(f=n[d+1|0]),_=C*(w=n[d+2|0]),g=C*(v=n[d+3|0]),I=P,a=C;--a>-1;)I.r=m,I.g=f,I.b=w,I.a=v,I=I.n;for(a=1;a<C;a++)o=d+((E<a?E:a)<<2)|0,c+=I.r=n[o],p+=I.g=n[o+1],_+=I.b=n[o+2],g+=I.a=n[o+3],I=I.n;for(A=P,r=0;r<y;r++)n[d++]=c*t>>>x,n[d++]=p*t>>>x,n[d++]=_*t>>>x,n[d++]=g*t>>>x,o=u+((o=r+e+1)<E?o:E)<<2,c-=A.r-(A.r=n[o]),p-=A.g-(A.g=n[o+1]),_-=A.b-(A.b=n[o+2]),g-=A.a-(A.a=n[o+3]),A=A.n;u+=y}for(t=R,x=F,r=0;r<y;r++){for(d=r<<2|0,c=M*(m=n[d])|0,p=M*(f=n[d+1|0])|0,_=M*(w=n[d+2|0])|0,g=M*(v=n[d+3|0])|0,L=k,a=0;a<M;a++)L.r=m,L.g=f,L.b=w,L.a=v,L=L.n;for(l=y,a=1;a<=i;a++)d=l+r<<2,c+=L.r=n[d],p+=L.g=n[d+1],_+=L.b=n[d+2],g+=L.a=n[d+3],L=L.n,a<S&&(l+=y);if(d=r,A=k,s>0)for(h=0;h<T;h++)o=d<<2,n[o+3]=v=g*t>>>x,v>0?(n[o]=c*t>>>x,n[o+1]=p*t>>>x,n[o+2]=_*t>>>x):n[o]=n[o+1]=n[o+2]=0,o=r+((o=h+M)<S?o:S)*y<<2,c-=A.r-(A.r=n[o]),p-=A.g-(A.g=n[o+1]),_-=A.b-(A.b=n[o+2]),g-=A.a-(A.a=n[o+3]),A=A.n,d+=y;else for(h=0;h<T;h++)o=d<<2,n[o+3]=v=g*t>>>x,v>0?(v=255/v,n[o]=(c*t>>>x)*v,n[o+1]=(p*t>>>x)*v,n[o+2]=(_*t>>>x)*v):n[o]=n[o+1]=n[o+2]=0,o=r+((o=h+M)<S?o:S)*y<<2,c-=A.r-(A.r=n[o]),p-=A.g-(A.g=n[o+1]),_-=A.b-(A.b=n[o+2]),g-=A.a-(A.a=n[o+3]),A=A.n,d+=y}}return!0}}Ht.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],Ht.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9];class Gt{constructor(t,e,i,s){this.setColor(t,e,i,s)}setColor(t,e,i,s){return this.reset().adjustColor(t,e,i,s)}reset(){return this.copy(Gt.IDENTITY_MATRIX)}adjustColor(t,e,i,s){return this.adjustBrightness(t).adjustContrast(e).adjustSaturation(i).adjustHue(s)}adjustBrightness(t){return 0===t||isNaN(t)||(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])),this}adjustContrast(t){if(0===t||isNaN(t))return this;let e;return(t=this._cleanValue(t,100))<0?e=127+t/100*127:(e=t%1,e=0===e?Gt.DELTA_INDEX[t]:Gt.DELTA_INDEX[t<<0]*(1-e)+Gt.DELTA_INDEX[1+(t<<0)]*e,e=127*e+127),this._multiplyMatrix([e/127,0,0,0,.5*(127-e),0,e/127,0,0,.5*(127-e),0,0,e/127,0,.5*(127-e),0,0,0,1,0,0,0,0,0,1]),this}adjustSaturation(t){if(0===t||isNaN(t))return this;let e=1+((t=this._cleanValue(t,100))>0?3*t/100:t/100),i=.3086,s=.6094,n=.082;return this._multiplyMatrix([i*(1-e)+e,s*(1-e),n*(1-e),0,0,i*(1-e),s*(1-e)+e,n*(1-e),0,0,i*(1-e),s*(1-e),n*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this}adjustHue(t){if(0===t||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;let e=Math.cos(t),i=Math.sin(t),s=.213,n=.715,r=.072;return this._multiplyMatrix([s+.787*e+i*-s,n+e*-n+i*-n,r+e*-r+.928*i,0,0,s+e*-s+.143*i,n+e*(1-n)+.14*i,r+e*-r+-.283*i,0,0,s+e*-s+-.787*i,n+e*-n+i*n,r+.928*e+i*r,0,0,0,0,0,1,0,0,0,0,0,1]),this}concat(t){return(t=this._fixMatrix(t)).length!=Gt.LENGTH||this._multiplyMatrix(t),this}clone(){return(new Gt).copy(this)}toArray(){const t=[],e=Gt.LENGTH;for(let i=0;i<e;i++)t[i]=this[i];return t}copy(t){const e=Gt.LENGTH;for(let i=0;i<e;i++)this[i]=t[i];return this}toString(){return`[${this.constructor.name}]`}_multiplyMatrix(t){let e=[];for(let i=0;i<5;i++){for(let t=0;t<5;t++)e[t]=this[t+5*i];for(let s=0;s<5;s++){let n=0;for(let i=0;i<5;i++)n+=t[s+5*i]*e[i];this[s+5*i]=n}}}_cleanValue(t,e){return Math.min(e,Math.max(-e,t))}_fixMatrix(t){return t instanceof Gt&&(t=t.toArray()),t.length<Gt.LENGTH?t=t.slice(0,t.length).concat(Gt.IDENTITY_MATRIX.slice(t.length,Gt.LENGTH)):t.length>Gt.LENGTH&&(t=t.slice(0,Gt.LENGTH)),t}}Gt.DELTA_INDEX=Object.freeze([0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10]),Gt.IDENTITY_MATRIX=Object.freeze([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]),Gt.LENGTH=25;var Wt={isSupported:()=>!!("ontouchstart"in window||window.MSPointerEvent&&window.navigator.msMaxTouchPoints>0||window.PointerEvent&&window.navigator.maxTouchPoints>0),enable(t,e=!1,i=!1){return!!(t&&t.canvas&&this.isSupported())&&(t.__touch||(t.__touch={pointers:{},multitouch:!e,preventDefault:!i,count:0},"ontouchstart"in window?this._IOS_enable(t):(window.PointerEvent||window.MSPointerEvent)&&this._IE_enable(t)),!0)},disable(t){t&&("ontouchstart"in window?this._IOS_disable(t):(window.PointerEvent||window.MSPointerEvent)&&this._IE_disable(t),delete t.__touch)},_IOS_enable(t){let e=t.canvas,i=t.__touch.f=e=>this._IOS_handleEvent(t,e);e.addEventListener("touchstart",i,!1),e.addEventListener("touchmove",i,!1),e.addEventListener("touchend",i,!1),e.addEventListener("touchcancel",i,!1)},_IOS_disable(t){let e=t.canvas;if(!e)return;let i=t.__touch.f;e.removeEventListener("touchstart",i,!1),e.removeEventListener("touchmove",i,!1),e.removeEventListener("touchend",i,!1),e.removeEventListener("touchcancel",i,!1)},_IOS_handleEvent(t,e){if(!t)return;t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();let i=e.changedTouches,s=e.type;i.length;for(let n of i){let i=n.identifier;n.target==t.canvas&&("touchstart"===s?this._handleStart(t,i,e,n.pageX,n.pageY):"touchmove"===s?this._handleMove(t,i,e,n.pageX,n.pageY):"touchend"!==s&&"touchcancel"!==s||this._handleEnd(t,i,e))}},_IE_enable(t){let e=t.canvas,i=t.__touch.f=e=>this._IE_handleEvent(t,e);void 0===window.PointerEvent?(e.addEventListener("MSPointerDown",i,!1),window.addEventListener("MSPointerMove",i,!1),window.addEventListener("MSPointerUp",i,!1),window.addEventListener("MSPointerCancel",i,!1),t.__touch.preventDefault&&(e.style.msTouchAction="none")):(e.addEventListener("pointerdown",i,!1),window.addEventListener("pointermove",i,!1),window.addEventListener("pointerup",i,!1),window.addEventListener("pointercancel",i,!1),t.__touch.preventDefault&&(e.style.touchAction="none")),t.__touch.activeIDs={}},_IE_disable(t){let e=t.__touch.f;void 0===window.PointerEvent?(window.removeEventListener("MSPointerMove",e,!1),window.removeEventListener("MSPointerUp",e,!1),window.removeEventListener("MSPointerCancel",e,!1),t.canvas&&t.canvas.removeEventListener("MSPointerDown",e,!1)):(window.removeEventListener("pointermove",e,!1),window.removeEventListener("pointerup",e,!1),window.removeEventListener("pointercancel",e,!1),t.canvas&&t.canvas.removeEventListener("pointerdown",e,!1))},_IE_handleEvent(t,e){if(!t)return;t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();let i=e.type,s=e.pointerId,n=t.__touch.activeIDs;if("MSPointerDown"===i||"pointerdown"===i){if(e.srcElement!=t.canvas)return;n[s]=!0,this._handleStart(t,s,e,e.pageX,e.pageY)}else n[s]&&("MSPointerMove"===i||"pointermove"===i?this._handleMove(t,s,e,e.pageX,e.pageY):"MSPointerUp"!==i&&"MSPointerCancel"!==i&&"pointerup"!==i&&"pointercancel"!==i||(delete n[s],this._handleEnd(t,s,e)))},_handleStart(t,e,i,s,n){let r=t.__touch;if(!r.multitouch&&r.count)return;let h=r.pointers;h[e]||(h[e]=!0,r.count++,t._handlePointerDown(e,i,s,n))},_handleMove(t,e,i,s,n){t.__touch.pointers[e]&&t._handlePointerMove(e,i,s,n)},_handleEnd(t,e,i){let s=t.__touch,n=s.pointers;n[e]&&(s.count--,t._handlePointerUp(e,i,!0),delete n[e])}};class jt extends o{constructor(t=0){super(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=t,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}addFrame(t,e,i=1,s,n){if(this._data)throw jt.ERR_RUNNING;let r=e||t.bounds||t.nominalBounds||t.getBounds&&t.getBounds();return r?this._frames.push({source:t,sourceRect:r,scale:i,funct:s,data:n,index:this._frames.length,height:r.height*i})-1:null}addAnimation(t,e,i,s){if(this._data)throw jt.ERR_RUNNING;this._animations[t]={frames:e,next:i,speed:s}}addMovieClip(t,e,i=1,s,n,r){if(this._data)throw jt.ERR_RUNNING;let h=t.frameBounds,a=e||t.bounds||t.nominalBounds||t.getBounds&&t.getBounds();if(!a&&!h)return;let o=this._frames.length;const l=t.timeline.duration;for(let e=0;e<l;e++){let r=h&&h[e]?h[e]:a;this.addFrame(t,r,i,this._setupMovieClipFrame,{i:e,f:s,d:n})}const d=t.timeline._labels;let u=[];for(let t in d)u.push({index:d[t],label:t});if(u.length){u.sort(((t,e)=>t.index-e.index));for(let e=0,i=u.length;e<i;e++){let s=u[e].label,n=o+u[e].index,h=o+(e===i-1?l:u[e+1].index),a=[];for(let t=n;t<h;t++)a.push(t);r&&(s=r(s,t,n,h),!s)||this.addAnimation(s,a,!0)}}}build(){if(this._data)throw jt.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet}buildAsync(t){if(this._data)throw jt.ERR_RUNNING;this.timeSlice=t,this._startBuild(),this._timerID=setTimeout((()=>this._run()),50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))}stopAsync(){clearTimeout(this._timerID),this._data=null}toString(){return`[${this.constructor.name}]`}_startBuild(){let t=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;let e=[];this._data={images:[],frames:e,framerate:this.framerate,animations:this._animations};let i=this._frames.slice();if(i.sort(((t,e)=>t.height<=e.height?-1:1)),i[i.length-1].height+2*t>this.maxHeight)throw jt.ERR_DIMENSIONS;let s=0,n=0,r=0;for(;i.length;){let h=this._fillRow(i,s,r,e,t);if(h.w>n&&(n=h.w),s+=h.h,!h.h||!i.length){let t=window.createjs&&createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");t.width=this._getSize(n,this.maxWidth),t.height=this._getSize(s,this.maxHeight),this._data.images[r]=t,h.h||(n=s=0,r++)}}}_setupMovieClipFrame(t,e){let i=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(e.i),t.actionsEnabled=i,e.f&&e.f(t,e.d,e.i)}_getSize(t,e){let i=4;for(;Math.pow(2,++i)<t;);return Math.min(e,Math.pow(2,i))}_fillRow(t,e,i,s,n){let r=this.maxWidth,h=this.maxHeight-(e+=n),a=n,o=0;for(let l=t.length-1;l>=0;l--){let d=t[l],u=this._scale*d.scale,c=d.sourceRect,p=d.source,_=Math.floor(u*c.x-n),g=Math.floor(u*c.y-n),m=Math.ceil(u*c.height+2*n),f=Math.ceil(u*c.width+2*n);if(f>r)throw jt.ERR_DIMENSIONS;m>h||a+f>r||(d.img=i,d.rect=new w(a,e,f,m),o=o||m,t.splice(l,1),s[d.index]=[a,e,f,m,i,Math.round(-_+u*p.regX-n),Math.round(-g+u*p.regY-n)],a+=f)}return{w:a,h:o}}_endBuild(){this.spriteSheet=new Xt(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")}_run(){let t=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),e=(new Date).getTime()+t,i=!1;for(;e>(new Date).getTime();)if(!this._drawNext()){i=!0;break}i?this._endBuild():this._timerID=setTimeout((()=>this._run()),50-t);let s=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){let t=new h("progress");t.progress=s,this.dispatchEvent(t)}}_drawNext(){let t=this._frames[this._index],e=t.scale*this._scale,i=t.rect,s=t.sourceRect,n=this._data.images[t.img].getContext("2d");return t.funct&&t.funct(t.source,t.data),n.save(),n.beginPath(),n.rect(i.x,i.y,i.width,i.height),n.clip(),n.translate(Math.ceil(i.x-s.x*e),Math.ceil(i.y-s.y*e)),n.scale(e,e),t.source.draw(n),n.restore(),++this._index<this._frames.length}}jt.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",jt.ERR_RUNNING="a build is already running";S();class $t extends o{constructor(t){super(),this._stage=t}static dispProps(t,e=""){let i=`\tP: ${t.x.toFixed(2)}x${t.y.toFixed(2)}\t`,s=`\tR: ${t.regX.toFixed(2)}x${t.regY.toFixed(2)}\t`;$t._log(e,t.toString()+"\t",i,s)}static _log(...t){$t.alternateOutput?$t.alternateOutput.log(...t):console.log(...t)}log(t){t||(t=this._stage),$t._log("Batches Per Draw: "+(t._batchID/t._drawID).toFixed(4)),this.logContextInfo(t._webGLContext),this.logDepth(t.children,""),this.logTextureFill(t)}toggleGPUDraw(t,e){t||(t=this._stage),void 0===e&&(e=!!t._drawBuffers_),e&&t._drawBuffers_?(t._drawBuffers=t._drawBuffers_,t._drawBuffers_=void 0):(t._drawBuffers_=t._drawBuffers,t._drawBuffers=function(t){this.vocalDebug&&$t._log(`BlankDraw[${this._drawID}:${this._batchID}] : ${this.batchReason}`)})}logDepth(t,e="",i=$t._log){t||(t=this._stage.children);const s=t.length;for(let n=0;n<s;n++){let s=t[n];i(e+"-",s),s.children&&s.children.length&&this.logDepth(s.children,"|"+e,i)}}logContextInfo(t){t||(t=this._stage._webGLContext);let e=`\n\t\t\t== LOG:\n\n\t\t\tMax textures per draw: ${t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}\n\n\t\t\tMax textures active: ${t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS)}\n\n\t\t\t\n\n\t\t\tMax texture size: ${t.getParameter(t.MAX_TEXTURE_SIZE)/2}\n\n\t\t\tMax cache size: ${t.getParameter(t.MAX_RENDERBUFFER_SIZE)/2}\n\n\t\t\t\n\n\t\t\tMax attributes per vertex: ${t.getParameter(t.MAX_VERTEX_ATTRIBS)}\n\n\t\t\tWebGL Version string: ${t.getParameter(t.VERSION)}\n\n\t\t\t======\n\t\t`;$t._log(e)}logTextureFill(t){t||(t=this._stage);let e=t._textureDictionary,i=t._batchTextureCount;$t._log(`${textureMax}: ${i}`);let s=[];for(let t in e){t.replace(window.location.origin,"");let i=e[t],n=!!i._lastActiveIndex&&i._lastActiveIndex===i._activeIndex;s.push({src:src,element:i,shifted:n}),i._lastActiveIndex=i._activeIndex}s.sort(((e,i)=>e.element._drawID===t._drawID?1:e.element._drawID<i.element._drawID?-1:0));const n=s.length;for(let e=0;e<n;e++){let i=s[e],n=i.element._drawID===t._drawID;$t._log(`[${i.src}] ${n?"ACTIVE":"stale"} ${i.shifted?"steady":"DRIFT"}`,i.element)}}}$t.alternateOutput=null;e.default=function(t){t=Object.assign({},{id:"canvas",direction:"down",width:500,height:500,viewX:500,viewY:50,viewBasis:"bottom",controls:!1,style:{fontSize:"12px",fontStyle:"normal",fontFamily:"Arial",color:"#000",lineHeight:null,lineWidth:150,backgroundColor:"#F5F5F5",borderColor:"#000",borderWidth:1,borderRadius:0,padding:10,margin:20,link:{height:20,color:"#AAA",opacity:1,weight:1},label:{fontSize:"12px",fontStyle:"normal",fontFamily:"Arial",color:"#888",backgroundColor:"#FFF",borderWidth:0,borderColor:"#AAA",borderWidth:1,borderRadius:5,maxWidth:150,maxCharacters:20}}},t);var e=document.getElementById(t.id),i=new E(t.id);null===i.canvas&&console.error("Wrong canvas id");var s=null,r=[],h=this;return this.panX=null,this.panY=null,this.maxLevel=0,this.progressive=!1,this.background=new Nt,this.background.alpha=.5,this.background.cursor="move",i.addChild(this.background),this.persistance=new y,i.addChild(this.persistance),this.main_cont=new y,i.addChild(this.main_cont),this.controls_cont=new y,i.addChild(this.controls_cont),this.boxes_cont=new y,this.links_cont=new y,this.labels_cont=new y,this.main_cont.addChild(this.boxes_cont,this.links_cont,this.labels_cont),this.debug_cont=new y,this.debug_cont.alpha=0,this.main_cont.addChild(this.debug_cont),i.enableMouseOver(20),this.init=function(){this.drawControls(),this.initListeners()},this.initListeners=function(){var t=this;i.on("pressmove",(function(e){t.movePan(e)})),i.on("pressup",(function(e){t.stopPan(e)}))},this.draw=function(){"down"!=t.direction&&"up"!=t.direction||(this.recalculateAllWidth(),this.standarizeAllHeight()),"left"!=t.direction&&"right"!=t.direction||(this.recalculateAllHeight(),this.standarizeAllWidth()),this.drawNode(s,!0),this.update()},this.redraw=function(){this.clear(),this.draw()},this.drawControls=function(){!1===t.controls&&(this.controls_cont.alpha=0);var e,i;this.zoomInButton=new y,(e=new Nt).graphics.beginFill("#DDD").drawRect(0,0,30,30),(i=new Yt("+","20px arial","#000")).x=8,i.y=4,this.zoomInButton.x=20,this.zoomInButton.y=20,this.zoomInButton.cursor="pointer",this.zoomInButton.addChild(e,i),this.zoomOutButton=new y,(e=new Nt).graphics.beginFill("#DDD").drawRect(0,0,30,30),(i=new Yt("-","20px arial","#000")).x=10,i.y=4,this.zoomOutButton.x=this.zoomInButton.x,this.zoomOutButton.y=this.zoomInButton.y+40,this.zoomOutButton.cursor="pointer",this.zoomOutButton.addChild(e,i),this.controls_cont.addChild(this.zoomInButton,this.zoomOutButton),this.zoomInButton.on("click",h.zoomIn,h),this.zoomOutButton.on("click",h.zoomOut,h)},this.movePan=function(t){null===this.panX&&null===this.panY&&(this.panX=t.stageX,this.panY=t.stageY),this.main_cont.x+=t.stageX-this.panX,this.main_cont.y+=t.stageY-this.panY,this.panX=t.stageX,this.panY=t.stageY,this.update()},this.stopPan=function(t){this.panX=null,this.panY=null},this.moveTo=function(e,i=650){if("current-node"==this.progressive?this.displayOnlyCurrentNode(e):"first-children"==this.progressive?this.displayOnlyFirstChildren(e):"above-level"==this.progressive?this.displayAboveLevel(e.level+1,!1):this.displayAllNodes(),this.redraw(),"top"==t.viewBasis)var s=t.viewX-e.x*this.main_cont.scale,r=t.viewY-e.y*this.main_cont.scale;if("bottom"==t.viewBasis)s=t.viewX-e.x*this.main_cont.scale,r=t.viewY-(e.y+e.box.height+t.style.padding+t.style.borderWidth)*this.main_cont.scale;At.get(this.main_cont).to({x:s,y:r},i,n.quadInOut).on("change",this.update)},this.displayOnlyCurrentNode=function(t,e=!0){r.map((t=>t.display=!e)),t.display=e,this.displayParents(t,e)},this.displayOnlyFirstChildren=function(t,e=!0){r.map((t=>t.display=!e)),t.display=e,this.displayParents(t,e,!0),t.parent.children.map((t=>t.display=e)),t.children.map((t=>t.display=e))},this.displayParents=function(t,e=!0,i=!1){null!=t.parent&&(t.parent.display=e,i&&t.parent.children.map((t=>t.display=e)),this.displayParents(t.parent,e,i))},this.displayAboveLevel=function(t,e=!0){r.map((t=>t.display=!e)),r.map((function(i){i.level>t&&(i.display=e)}))},this.displayAllNodes=function(t=!0){r.map((e=>e.display=t))},this.styleParents=function(t,e,i=[]){null!=t.parent&&(void 0!==i.find((e=>e==t.parent.meta.id))&&this.styleNode(t.parent,e),void 0!==t.parent.parent&&this.styleParents(t.parent,e))},this.styleNode=function(t,e){this.eraseNode(t),e=Object.assign({},t.style,e);let i=this.cloneNode(t,e),s=r.indexOf(t);if(r[s]=i,void 0!==t.parent&&t.parent.children.length>0){let e=t.parent,s=e.children.find((e=>e.meta.id===t.meta.id)),n=e.children.indexOf(s);i.parent.children[n]=i}return t.children.length>0&&t.children.map((t=>t.parent=i)),this.drawNode(i,!0),this.update(),i},this.eraseNode=function(t,e=0){At.get(t.box).to({alpha:0},e).call((function(){h.boxes_cont.removeChild(t.box)})),t.label&&At.get(t.label).to({alpha:0},e).call((function(){h.labels_cont.removeChild(t.label)})),t.links&&At.get(t.links).to({alpha:0},e).call((function(){h.links_cont.removeChild(t.links)}))},this.cloneNode=function(t,e){let i=this.createNode(t.name,t.meta,e);return i.parent=t.parent,i.level=t.level,i.width=t.width,i.height=t.height,i.children=t.children,i.childrenWidth=t.childrenWidth,i.childrenHeight=t.childrenHeight,i.x=t.x,i.y=t.y,i.display=t.display,i},this.findNodeByName=function(t){return r.find((e=>e.name===t))},this.findNodeById=function(t){return r.find((e=>e.meta.id===t))},this.createNode=function(e,i={},s){s=Object.assign({},t.style,s);var n=new y,r=s.fontStyle+" "+s.fontSize+" "+s.fontFamily;e&&""!=e||(e=" ");var h=new Yt(e,r,s.color);h.lineWidth=s.lineWidth,h.lineHeight=s.lineHeight,h.textBaseline="top",h.y=s.padding/2;var a=h.getBounds().width,o=h.getMeasuredHeight(),l=new Nt;l.graphics.beginStroke(s.borderColor).setStrokeStyle(s.borderWidth).beginFill(s.backgroundColor).drawRoundRect(0,0,a+2*s.padding,o+2*s.padding,s.borderRadius,s.borderRadius,s.borderRadius,s.borderRadius),l.x=-a/2-s.padding,h.regX=a/2,h.y=s.padding,n.addChild(l),n.addChild(h),n.rec=l,n.txt=h,n.width=a+2*s.padding,n.height=o+2*s.padding;var d=new Nt;d.graphics.beginFill("red").drawCircle(0,0,3),d.alpha=0,n.addChild(d);var u={name:e,box:n,children:[],childrenWidth:0,childrenHeight:0,meta:i,style:s,display:!0};return"function"==typeof i.clickAction&&(n.addEventListener("click",(function(t){i.clickAction(u),t.stopPropagation()})),n.cursor="pointer"),u},this.getDownCoord=function(e,i){var s=i.children.length,n=i.childrenWidth/(2*s)*(2*i.children.indexOf(e)+1);return{x:i.x-i.childrenWidth/2+n,y:i.y+i.height+2*t.style.margin}},this.getUpCoord=function(e,i){var s=i.children.length,n=i.childrenWidth/(2*s)*(2*i.children.indexOf(e)+1);return{x:i.x-i.childrenWidth/2+n,y:i.y-i.height-2*t.style.margin}},this.getLeftCoord=function(e,i){var s=i.children.length,n=i.childrenHeight/(2*s)*(2*i.children.indexOf(e)+1);return{x:i.x-i.box.width-2*t.style.margin,y:i.y-i.childrenHeight/2-e.box.height/4+n}},this.getRightCoord=function(e,i){var s=i.children.length,n=i.childrenHeight/(2*s)*(2*i.children.indexOf(e)+1);return{x:i.x+i.box.width+2*t.style.margin,y:i.y-i.childrenHeight/2-e.box.height/4+n}},this.drawNode=function(e,i=!1){if(!1!==e.display){if(void 0!==e.parent){var s=e.parent;if("down"==t.direction)var n=this.getDownCoord(e,s);if("up"==t.direction)n=this.getUpCoord(e,s);if("left"==t.direction)n=this.getLeftCoord(e,s);if("right"==t.direction)n=this.getRightCoord(e,s);e.x=n.x,e.y=n.y}var r=e.box;r.x=e.x,r.y=e.y,this.boxes_cont.addChild(r);var h=new Nt;if(h.graphics.beginStroke("red").setStrokeStyle(1).drawRect(0,0,e.childrenWidth,e.box.height),h.x=r.x-e.childrenWidth/2,h.y=r.y,this.debug_cont.addChild(h),void 0!==e.parent&&this.drawLink(e,s),void 0!==e.parent&&void 0!==e.meta.label&&null!==e.meta.label&&this.drawLabel(e,s),!1!==i&&e.children.length>0)for(var a=0,o=e.children.length-1;a<=o;++a)this.drawNode(e.children[a],i)}},this.stylePathTo=function(t,e,i=null){},this.drawLink=function(e,i){var s=t.style.link.height,n=new g,r=new g,h=new g,a=new g;"down"==t.direction&&(n.x=i.x,n.y=i.y+i.box.height,a.x=e.x,a.y=e.y,r.x=n.x,r.y=i.y+i.height+s,h.x=a.x,h.y=r.y),"up"==t.direction&&(n.x=i.x,n.y=i.y,a.x=e.x,a.y=e.y+e.box.height,r.x=n.x,r.y=i.y-s,h.x=a.x,h.y=r.y),"right"==t.direction&&(n.x=i.x+i.box.width/2,n.y=i.y+i.box.height/2,a.x=e.x-e.box.width/2,a.y=e.y+e.box.height/2,r.x=n.x+s,r.y=n.y,h.x=a.x-s,h.y=a.y),"left"==t.direction&&(n.x=i.x-i.box.width/2,n.y=i.y+i.box.height/2,a.x=e.x+e.box.width/2,a.y=e.y+e.box.height/2,r.x=n.x-s,r.y=n.y,h.x=a.x+s,h.y=a.y);var o=Object.assign({},t.style.link,e.style.link),l=new Nt;l.graphics.beginStroke(o.color).setStrokeStyle(o.weight).moveTo(n.x,n.y).lineTo(r.x,r.y).lineTo(h.x,h.y).lineTo(a.x,a.y),l.alpha=o.opacity,this.links_cont.addChild(l),e.link=l,e.linkOutPoint=n,e.linkTurn1Point=r,e.linkTurn2Point=h,e.linkInPoint=a},this.drawLabel=function(e,i){var s=Object.assign({},t.style.label,e.style.label),n=s.fontStyle+" "+s.fontSize+" "+s.fontFamily,r=new y,h=e.meta.label;h=(h=h.length>0?h:" ").length>s.maxCharacters?h.substring(0,s.maxCharacters)+"...":h;var a=new Yt(h,n,s.color);a.maxWidth=s.maxWidth;var o=a.getBounds(),l=new Nt;l.graphics.beginStroke(s.borderColor).setStrokeStyle(s.borderWidth).beginFill(s.backgroundColor).drawRoundRect(-o.width/2-5,-o.height/2,o.width+10,2*o.height,s.borderRadius,s.borderRadius,s.borderRadius,s.borderRadius),r.addChild(l),r.addChild(a),r.regX=o.width/2,a.regX=o.width/2,l.y=-o.height/2,a.y=-o.height/2,r.x=e.linkTurn2Point.x+o.width/2,r.y=(e.linkTurn1Point.y+e.linkTurn2Point.y)/2,this.labels_cont.addChild(r),e.label=r},this.addRoot=function(e,i={},n={}){var h=this.createNode(e,i,n);return h.x=t.width/2,h.y=t.style.padding,h.width=t.width,h.level=0,h.children=[],r.push(h),s=h},this.addChild=function(t,e,i={}){var s=t.level+1;this.maxLevel=s>this.maxLevel?s:this.maxLevel;var n=this.createNode(e.name,e.meta,i);return n.parent=t,n.level=s,r.push(n),t.children.push(n),n},this.addChildren=function(t,e=[],i={}){var s=t.level+1;this.maxLevel=s>this.maxLevel?s:this.maxLevel;for(var n=[],h=0,a=e.length-1;h<=a;h++){let a=e[h];var o=this.createNode(a.name,i);o.parent=t,o.level=s,o.meta=a.meta,n.push(o),r.push(o)}return t.children=t.children.concat(n),n},this.recalculateAllWidth=function(){for(var e=this.maxLevel;e>0;e--){r.filter((t=>t.level===e)).map((function(e){let i=e.parent,s=i.children.filter((t=>!0===t.display));if(s.length>0){let e=s.map((t=>null==t.childrenWidth||0==t.childrenWidth?t.box.width:t.childrenWidth)).reduce(((t,e)=>t+e));e+=t.style.margin*s.length,i.childrenWidth=e}else i.childrenWidth=0}))}},this.calculChildrenWidth=function(t){var e=t.childrenWidth/t.children.length;t.children.map((function(t){t.childrenWidth=e,h.calculChildrenWidth(t)}))},this.recalculateAllHeight=function(){var e=t.height,i=this.findMaxRowHeight(),n=i>e?i:e;s.childrenHeight=n,this.calculChildrenHeight(s)},this.calculChildrenHeight=function(t){var e=t.childrenHeight/t.children.length;t.children.map((function(t){t.childrenHeight=e,h.calculChildrenHeight(t)}))},this.standarizeAllHeight=function(){for(var t=[],e=0,i=r.length-1;e<=i;++e){var s=(n=r[e]).level;(void 0===t[s]||n.box.height>t[s])&&(t[s]=n.box.height)}for(e=0,i=r.length-1;e<=i;++e){var n;(n=r[e]).height=t[n.level]}},this.standarizeAllWidth=function(){},this.getTotalNodesWidth=function(e){for(var i=0,s=0,n=e.length-1;s<=n;s++)i+=e[s].width+t.style.margin;return i},this.findMaxRowWidth=function(){for(var t=[],e=0,i=r.length-1;e<=i;++e){var s=r[e];void 0===t[s.level]?t[s.level]=s.box.width:t[s.level]+=s.box.width}return Math.max(...t)},this.findMaxRowHeight=function(){for(var t=[],e=0,i=r.length-1;e<=i;e++){var s=r[e];void 0===t[s.level]?t[s.level]=s.box.height:t[s.level]+=s.box.height}return Math.max(...t)},this.isMobile=function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("android")>-1||(t.indexOf("iphone")>-1||t.indexOf("ipad")>-1)},this.drawBackground=function(){this.background.graphics.clear().beginFill("#FFF").drawRect(0,0,t.width,t.height)},this.resize=function(s=null,n=null){s=null!==s?s:t.width,n=null!==n?n:t.height;this.isMobile()&&Wt.enable(i);var r=e;r.width=s,r.height=n,r.style.width=s+"px",r.style.height=n+"px",t.width=s,t.height=n,t.viewX=s/2,this.drawBackground(),this.update()},this.clear=function(){this.boxes_cont.removeAllChildren(),this.links_cont.removeAllChildren(),this.labels_cont.removeAllChildren(),this.update()},this.reset=function(){r=[],s=null,null,this.panX=null,this.panY=null,this.maxLevel=0,this.boxes_cont.removeAllChildren(),this.links_cont.removeAllChildren(),this.labels_cont.removeAllChildren(),this.update()},this.update=function(){i.update()},this.setProgressive=function(t=!0){return this.progressive=t,this},this.setControlsDisplay=function(e=!0){return t.controls=e,this.controls_cont.alpha=!0===e?1:0,this.update(),this},this.centerTo=function(e,i){return t.viewX=e,t.viewY=i,this},this.zoomIn=function(t){this.main_cont.scale+=.1,this.update(),t.stopPropagation()},this.zoomOut=function(t){this.main_cont.scale-=.1,this.update(),t.stopPropagation()},this.setZoom=function(t=1){this.main_cont.scale=t,this.update()},this.init(),this.resize(),this}}]);